{"version":3,"sources":["../src/preflights/preflight-init.ts","../src/utils/is-safe-target.ts","../src/utils/updaters/update-css.ts","../src/utils/updaters/update-css-vars.ts","../src/utils/updaters/update-dependencies.ts","../src/utils/updaters/update-env-vars.ts","../src/utils/updaters/update-fonts.ts","../src/utils/add-components.ts","../src/utils/create-project.ts","../src/utils/env-loader.ts","../src/utils/file-helper.ts","../src/registry/namespaces.ts","../src/utils/registries.ts","../src/utils/updaters/update-tailwind-content.ts","../src/commands/init.ts","../src/preflights/preflight-add.ts","../src/utils/update-app-index.ts","../src/commands/add.ts","../src/preflights/preflight-build.ts","../src/commands/build.ts","../src/commands/create.ts","../src/commands/diff.ts","../src/commands/info.ts","../src/commands/mcp.ts","../src/utils/legacy-icon-libraries.ts","../src/migrations/migrate-icons.ts","../src/migrations/migrate-radix.ts","../src/preflights/preflight-migrate.ts","../src/commands/migrate.ts","../src/preflights/preflight-registry.ts","../src/commands/registry/build.ts","../src/commands/registry/mcp.ts","../src/commands/search.ts","../src/commands/view.ts","../package.json","../src/index.ts"],"names":["preFlightInit","options","errors","fs","path","projectSpinner","spinner","logger","highlighter","frameworkSpinner","projectInfo","getProjectInfo","tailwindSpinnerMessage","tailwindSpinner","tsConfigSpinner","isSafeTarget","targetPath","cwd","decodedPath","prevPath","normalizedTarget","normalizedRoot","hasPathTraversal","cleanPath","cleanTarget","cleanDecoded","pattern","resolvedPath","updateCss","css","config","cssFilepath","cssFilepathRelative","cssSpinner","raw","output","transformCss","input","plugins","updateCssPlugin","result","postcss","root","lastNode","selector","properties","atRuleMatch","name","params","node","importRule","importNodes","lastImport","quotedParams","normalizeParams","p","pluginRule","pluginNodes","lastPlugin","newAtRule","themeInline","existingKeyframesRule","keyframesRule","step","stepProps","processRule","utilityAtRule","prop","value","existingDecl","decl","atRule","processAtRule","childSelector","childProps","nestedMatch","nestedName","nestedParams","tempRule","rule","clone","error","parent","atRuleName","atRuleParams","nestedSelector","updateCssVars","cssVars","cssVarsSpinner","transformCssVars","updateCssVarsPlugin","cleanupDefaultNextStylesPlugin","packageInfo","getPackageInfo","addCustomImport","addCustomVariant","updateCssVarsPluginV4","updateThemePlugin","updateTailwindConfigPlugin","updateTailwindConfigAnimationPlugin","updateTailwindConfigKeyframesPlugin","updateBaseLayerPlugin","tailwindVersion","requiredRules","baseLayer","apply","applyRule","AtRule","key","vars","addOrUpdateVars","removeConflictVars","rootRule","propsToRemove","bodyRule","darkRootRule","ruleNode","newDecl","themeNode","upsertThemeNode","isLocalHSLValue","variables","themeVarNodes","variable","radiusVariables","cssVarNode","isColorValue","propValue","variantNode","customVariantNode","importNode","tailwindConfig","quote","getQuoteType","lastPluginNode","plugin","pluginName","pluginNode","existingKeyFrameNodes","keyframeValueSchema","z","keyframeName","keyframeValue","parsedKeyframeValue","keyframeNode","values","existingAnimationNodes","parsedAnimationValue","animationNode","chunks","chunk","updateDependencies","dependencies","devDependencies","dependenciesSpinner","packageManager","getUpdateDependenciesPackageManager","flag","shouldPromptForNpmFlag","confirmation","prompts","installWithPackageManager","hasReact19","hasReactDayPicker8","getPackageManager","installWithNpm","installWithDeno","installWithExpo","execa","dep","updateEnvVars","envVars","envSpinner","projectRoot","envFilePath","existingEnvFile","findExistingEnvFile","envFileExists","existsSync","envFileName","newEnvContent","envVarsAdded","envFileUpdated","envFileCreated","existingContent","mergedContent","mergeEnvContent","getNewEnvKeys","massageTreeForFonts","tree","fontSans","fontSourceDependency","updateFonts","fonts","fontsSpinner","updateNextFonts","layoutPath","findLayoutFile","layoutContent","updatedContent","transformLayoutFonts","isSrcDir","ext","possiblePaths","relativePath","fullPath","_config","sourceFile","Project","ScriptKind","googleFonts","f","fontVariableNames","font","importName","varName","toCamelCase","existingImport","fontOptions","buildFontOptions","imp","existingVarDecl","findFontVariableDeclaration","insertPosition","findInsertPosition","VariableDeclarationKind","updateHtmlClassName","str","part","index","variableStatements","statement","declaration","initializer","SyntaxKind","args","argText","imports","jsxElements","element","classNameAttr","variableExpressions","ensureCnImport","jsxAttr","newVarExpressions","currentValue","jsxExpr","expr","exprText","v","cleanedExpr","removeFontVariablesFromCn","newExpr","insertFontVariablesIntoCn","cnArgs","parseTemplateLiteralToCnArgs","utilsImport","templateLiteral","staticArgs","variableArgs","parts","staticParts","staticPart","cnExpr","fontVars","varsStr","addComponents","components","workspaceConfig","getWorkspaceConfig","addWorkspaceComponents","addProjectComponents","registrySpinner","resolveRegistryTree","configWithDefaults","handleError","validateFilesTarget","getProjectTailwindVersionFromConfig","updateTailwindConfig","overwriteCssVars","shouldOverwriteCssVars","updateFiles","filesCreated","filesUpdated","filesSkipped","rootSpinner","mainTargetConfig","workspaceRoot","findCommonRoot","filesByType","file","type","typeFiles","targetConfig","typeWorkspaceRoot","packageRoot","findPackageRoot","files","getRegistryItems","registryItemSchema","component","GITHUB_TEMPLATE_URL","TEMPLATES","createProject","template","projectName","nextVersion","isRemoteComponent","fetchRegistry","meta","projectPath","createNextProject","createMonorepoProject","createViteProject","createStartProject","createSpinner","templatePath","os","response","tarPath","extractedPath","packageJsonPath","packageJsonContent","packageJson","lockFilePath","loadEnvFiles","envFiles","envFile","envPath","join","FILE_BACKUP_SUFFIX","createFileBackup","filePath","fsExtra","backupPath","restoreFileBackup","deleteFileBackup","resolveRegistryNamespaces","discoveredNamespaces","visitedItems","itemsToProcess","currentItem","registry","parseRegistryAndItemFromString","BUILTIN_REGISTRIES","item","fetchRegistryItems","depRegistry","RegistryNotConfiguredError","ensureRegistriesInConfig","missingRegistries","registryIndex","getRegistriesIndex","foundRegistries","existingRegistries","newConfigWithRegistries","resolvedPaths","configWithoutResolvedPaths","configSpinner","updatedConfig","rawConfigSchema","updateTailwindContent","content","tailwindFileRelativePath","transformTailwindContent","_createSourceFile","configObject","property","addTailwindConfigContent","quoteChar","_getQuoteChar","existingProperty","newProperty","contentItem","newValue","code","initOptionsSchema","val","BASE_COLORS","color","init","Command","opts","shadowConfig","createConfig","componentsJsonPath","existingConfig","baseConfig","buildUrlAndHeadersForRegistryItem","deepmerge","runInit","clearRegistryContext","newProjectTemplate","preflight","getConfig","projectConfig","getProjectConfig","promptForMinimalConfig","promptForConfig","proceed","fullConfigForRegistry","resolveConfigPaths","configWithRegistries","componentSpinner","mergeConfig","base","override","registries","merged","fullConfig","defaultConfig","styles","baseColors","getRegistryStyles","getRegistryBaseColors","style","DEFAULT_TAILWIND_CSS","DEFAULT_TAILWIND_CONFIG","DEFAULT_COMPONENTS","DEFAULT_UTILS","baseColor","cssVariables","iconLibrary","preFlightAdd","updateAppIndex","indexPath","registryItem","addOptionsSchema","add","initialConfig","restrictedComponentPrefixes","restrictedStylePrefixes","prefix","restrictedComponents","hasNewRegistries","newRegistries","itemType","shouldInstallBaseStyle","isUniversalRegistryItem","confirm","promptForRegistryComponents","deprecatedComponents","DEPRECATED_COMPONENTS","initHasRun","shouldUpdateAppIndex","getShadcnRegistryIndex","entry","c","preFlightBuild","resolvePaths","buildOptionsSchema","build","we","ne","registrySchema","buildSpinner","SHADCN_URL","CREATE_TEMPLATES","create","createUrl","getShadcnCreateUrl","open","enteredName","selectedTemplate","presetResult","handlePresetOption","initUrl","buildInitUrl","registryBaseConfig","templateFiles","getTemplateFiles","preset","getShadcnInitUrl","presetArg","presets","getPresets","selectedPreset","url","isUrl","getPreset","presetNames","dedent","updateOptionsSchema","diff","targetDir","projectComponents","componentsWithUpdates","changes","diffComponent","change","printDiff","payload","fetchTree","getRegistryBaseColor","getItemTargetPath","fileContent","registryContent","transform","patch","diffLines","info","SHADCN_MCP_VERSION","CLIENTS","DEPENDENCIES","mcp","transport","StdioServerTransport","server","mcpInitOptionsSchema","command","client","installCommand","devFlag","installSpinner","configPath","runMcpInit","overwriteMerge","_","sourceArray","clientInfo","dir","mergedConfig","LEGACY_ICON_LIBRARIES","migrateIcons","uiPath","registryIcons","fg","getRegistryIcons","libraryChoices","migrateOptions","sourceLibrary","targetLibrary","migrationSpinner","migrateIconsFile","iconsMapping","sourceLibraryImport","targetLibraryImport","tmpdir","project","tempFile","randomBytes","targetedIcons","importDeclaration","specifier","iconName","targetedIcon","icon","toPascalCase","processNamedImports","namedImports","isTypeOnly","packageName","namedImportList","importItem","inlineTypeMatch","aliasMatch","importAlias","migrateRadix","foundPackages","replacedPackages","migrateRadixFile","pkg","packageSpinner","foundPackagesArray","dependencyTypes","depType","radixImportPattern","linesToRemove","quoteStyle","hasSemicolon","match","fullMatch","typeKeyword","namespaceAlias","semicolon","componentName","uniqueImports","self","i","unifiedImport","typePrefix","acc","line","transformedLine","offset","string","beforeMatch","openQuotes","openSingleQuotes","uniqueReplacedPackages","preFlightMigrate","migrations","migrateOptionsSchema","migration","migrate","preFlightRegistryBuild","buildRegistry","pe","resolvedRegistry","resolveRegistryItems","t","d","absPath","err","results","recursivelyResolveFileImports","searchOptionsSchema","search","partialConfig","validateRegistryConfigForItems","searchRegistries","viewOptionsSchema","view","items","package_default","main","program"],"mappings":"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","file":"index.js","sourcesContent":["import path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightInit(\n  options: z.infer<typeof initOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      projectInfo: null,\n    }\n  }\n\n  const projectSpinner = spinner(`Preflight checks.`, {\n    silent: options.silent,\n  }).start()\n\n  if (\n    fs.existsSync(path.resolve(options.cwd, \"components.json\")) &&\n    !options.force\n  ) {\n    projectSpinner?.fail()\n    logger.break()\n    logger.error(\n      `A ${highlighter.info(\n        \"components.json\"\n      )} file already exists at ${highlighter.info(\n        options.cwd\n      )}.\\nTo start over, remove the ${highlighter.info(\n        \"components.json\"\n      )} file and run ${highlighter.info(\"init\")} again.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  projectSpinner?.succeed()\n\n  const frameworkSpinner = spinner(`Verifying framework.`, {\n    silent: options.silent,\n  }).start()\n  const projectInfo = await getProjectInfo(options.cwd)\n  if (!projectInfo || projectInfo?.framework.name === \"manual\") {\n    errors[ERRORS.UNSUPPORTED_FRAMEWORK] = true\n    frameworkSpinner?.fail()\n    logger.break()\n    if (projectInfo?.framework.links.installation) {\n      logger.error(\n        `We could not detect a supported framework at ${highlighter.info(\n          options.cwd\n        )}.\\n` +\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to manually configure your project.\\nOnce configured, you can use the cli to add components.`\n      )\n    }\n    logger.break()\n    process.exit(1)\n  }\n  frameworkSpinner?.succeed(\n    `Verifying framework. Found ${highlighter.info(\n      projectInfo.framework.label\n    )}.`\n  )\n\n  let tailwindSpinnerMessage = \"Validating Tailwind CSS.\"\n\n  if (projectInfo.tailwindVersion === \"v4\") {\n    tailwindSpinnerMessage = `Validating Tailwind CSS config. Found ${highlighter.info(\n      \"v4\"\n    )}.`\n  }\n\n  const tailwindSpinner = spinner(tailwindSpinnerMessage, {\n    silent: options.silent,\n  }).start()\n  if (\n    projectInfo.tailwindVersion === \"v3\" &&\n    (!projectInfo?.tailwindConfigFile || !projectInfo?.tailwindCssFile)\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (\n    projectInfo.tailwindVersion === \"v4\" &&\n    !projectInfo?.tailwindCssFile\n  ) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else if (!projectInfo.tailwindVersion) {\n    errors[ERRORS.TAILWIND_NOT_CONFIGURED] = true\n    tailwindSpinner?.fail()\n  } else {\n    tailwindSpinner?.succeed()\n  }\n\n  const tsConfigSpinner = spinner(`Validating import alias.`, {\n    silent: options.silent,\n  }).start()\n  if (!projectInfo?.aliasPrefix) {\n    errors[ERRORS.IMPORT_ALIAS_MISSING] = true\n    tsConfigSpinner?.fail()\n  } else {\n    tsConfigSpinner?.succeed()\n  }\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.TAILWIND_NOT_CONFIGURED]) {\n      logger.break()\n      logger.error(\n        `No Tailwind CSS configuration found at ${highlighter.info(\n          options.cwd\n        )}.`\n      )\n      logger.error(\n        `It is likely you do not have Tailwind CSS installed or have an invalid configuration.`\n      )\n      logger.error(`Install Tailwind CSS then try again.`)\n      if (projectInfo?.framework.links.tailwind) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.tailwind\n          )} to get started.`\n        )\n      }\n    }\n\n    if (errors[ERRORS.IMPORT_ALIAS_MISSING]) {\n      logger.break()\n      logger.error(`No import alias found in your tsconfig.json file.`)\n      if (projectInfo?.framework.links.installation) {\n        logger.error(\n          `Visit ${highlighter.info(\n            projectInfo?.framework.links.installation\n          )} to learn how to set an import alias.`\n        )\n      }\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    projectInfo,\n  }\n}\n","import path from \"path\"\n\nexport function isSafeTarget(targetPath: string, cwd: string): boolean {\n  // Check for null bytes which can be used to bypass validations.\n  if (targetPath.includes(\"\\0\")) {\n    return false\n  }\n\n  // Decode URL-encoded sequences to catch encoded traversal attempts.\n  let decodedPath: string\n  try {\n    // Decode multiple times to catch double-encoded sequences.\n    decodedPath = targetPath\n    let prevPath = \"\"\n    while (decodedPath !== prevPath && decodedPath.includes(\"%\")) {\n      prevPath = decodedPath\n      decodedPath = decodeURIComponent(decodedPath)\n    }\n  } catch {\n    // If decoding fails, treat as unsafe.\n    return false\n  }\n\n  // Normalize both paths to handle different path separators.\n  // Convert Windows backslashes to forward slashes for consistent handling.\n  const normalizedTarget = path.normalize(decodedPath.replace(/\\\\/g, \"/\"))\n  const normalizedRoot = path.normalize(cwd)\n\n  // Check for explicit path traversal sequences in both encoded and decoded forms.\n  // Allow [...] pattern which is common in framework routing (e.g., [...slug])\n  const hasPathTraversal = (path: string) => {\n    // Remove [...] patterns before checking for ..\n    const withoutBrackets = path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n    return withoutBrackets.includes(\"..\")\n  }\n\n  if (\n    hasPathTraversal(normalizedTarget) ||\n    hasPathTraversal(decodedPath) ||\n    hasPathTraversal(targetPath)\n  ) {\n    return false\n  }\n\n  // Check for current directory references that might be used in traversal.\n  // First, remove [...] patterns to avoid false positives\n  const cleanPath = (path: string) => path.replace(/\\[\\.\\.\\..*?\\]/g, \"\")\n  const cleanTarget = cleanPath(targetPath)\n  const cleanDecoded = cleanPath(decodedPath)\n\n  const suspiciousPatterns = [\n    /\\.\\.[\\/\\\\]/, // ../ or ..\\\n    /[\\/\\\\]\\.\\./, // /.. or \\..\n    /\\.\\./, // .. anywhere\n    /\\.\\.%/, // URL encoded traversal\n    /\\x00/, // null byte\n    /[\\x01-\\x1f]/, // control characters\n  ]\n\n  if (\n    suspiciousPatterns.some(\n      (pattern) => pattern.test(cleanTarget) || pattern.test(cleanDecoded)\n    )\n  ) {\n    return false\n  }\n\n  // Allow ~/ at the start (home directory expansion within project) but reject ~/../ patterns.\n  if (\n    (targetPath.includes(\"~\") || decodedPath.includes(\"~\")) &&\n    (targetPath.includes(\"../\") || decodedPath.includes(\"../\"))\n  ) {\n    return false\n  }\n\n  // Check for Windows drive letters (even on non-Windows systems for safety).\n  const driveLetterRegex = /^[a-zA-Z]:[\\/\\\\]/\n  if (driveLetterRegex.test(decodedPath)) {\n    // On Windows, check if it starts with the project root.\n    if (process.platform === \"win32\") {\n      return decodedPath.toLowerCase().startsWith(cwd.toLowerCase())\n    }\n    // On non-Windows systems, reject all Windows absolute paths.\n    return false\n  }\n\n  // If it's an absolute path, ensure it's within the project root.\n  if (path.isAbsolute(normalizedTarget)) {\n    return normalizedTarget.startsWith(normalizedRoot + path.sep)\n  }\n\n  // For relative paths, resolve and check if within project bounds.\n  const resolvedPath = path.resolve(normalizedRoot, normalizedTarget)\n  return (\n    resolvedPath.startsWith(normalizedRoot + path.sep) ||\n    resolvedPath === normalizedRoot\n  )\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemCssSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Declaration from \"postcss/lib/declaration\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCss(\n  css: z.infer<typeof registryItemCssSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (\n    !config.resolvedPaths.tailwindCss ||\n    !css ||\n    Object.keys(css).length === 0\n  ) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssSpinner = spinner(\n    `Updating ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCss(raw, css)\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssSpinner.succeed()\n}\n\nexport async function transformCss(\n  input: string,\n  css: z.infer<typeof registryItemCssSchema>\n) {\n  const plugins = [updateCssPlugin(css)]\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  // PostCSS doesn't add semicolons to at-rules without bodies when they're the last node.\n  // We need to manually ensure they have semicolons.\n  const root = result.root\n  if (root.nodes && root.nodes.length > 0) {\n    const lastNode = root.nodes[root.nodes.length - 1]\n    if (\n      lastNode.type === \"atrule\" &&\n      !lastNode.nodes &&\n      !output.trimEnd().endsWith(\";\")\n    ) {\n      output = output.trimEnd() + \";\"\n    }\n  }\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n  output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  output = output.trimEnd()\n\n  return output\n}\n\nfunction updateCssPlugin(css: z.infer<typeof registryItemCssSchema>) {\n  return {\n    postcssPlugin: \"update-css\",\n    Once(root: Root) {\n      for (const [selector, properties] of Object.entries(css)) {\n        if (selector.startsWith(\"@\")) {\n          // Handle at-rules (@layer, @utility, etc.)\n          const atRuleMatch = selector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n          if (!atRuleMatch) continue\n\n          const [, name, params] = atRuleMatch\n\n          // Special handling for imports - place them at the top.\n          if (name === \"import\") {\n            // Check if this import already exists.\n            const existingImport = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"import\" &&\n                node.params === params\n            )\n\n            if (!existingImport) {\n              const importRule = postcss.atRule({\n                name: \"import\",\n                params,\n                raws: { semicolon: true },\n              })\n\n              // Find the last import to insert after, or insert at beginning.\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              if (importNodes && importNodes.length > 0) {\n                // Insert after the last existing import.\n                const lastImport = importNodes[importNodes.length - 1]\n                importRule.raws.before = \"\\n\"\n                root.insertAfter(lastImport, importRule)\n              } else {\n                // No imports exist, insert at the very beginning.\n                // Check if the file is empty.\n                if (!root.nodes || root.nodes.length === 0) {\n                  importRule.raws.before = \"\"\n                } else {\n                  importRule.raws.before = \"\"\n                }\n                root.prepend(importRule)\n              }\n            }\n          }\n          // Special handling for plugins - place them after imports.\n          else if (name === \"plugin\") {\n            // Ensure plugin name is quoted if not already.\n            let quotedParams = params\n            if (params && !params.startsWith('\"') && !params.startsWith(\"'\")) {\n              quotedParams = `\"${params}\"`\n            }\n\n            // Normalize params for comparison (remove quotes).\n            const normalizeParams = (p: string) => {\n              if (p.startsWith('\"') && p.endsWith('\"')) {\n                return p.slice(1, -1)\n              }\n              if (p.startsWith(\"'\") && p.endsWith(\"'\")) {\n                return p.slice(1, -1)\n              }\n              return p\n            }\n\n            // Find existing plugin with same normalized params.\n            const existingPlugin = root.nodes?.find((node): node is AtRule => {\n              if (node.type !== \"atrule\" || node.name !== \"plugin\") {\n                return false\n              }\n              return normalizeParams(node.params) === normalizeParams(params)\n            })\n\n            if (!existingPlugin) {\n              const pluginRule = postcss.atRule({\n                name: \"plugin\",\n                params: quotedParams,\n                raws: { semicolon: true, before: \"\\n\" },\n              })\n\n              // Find the last import or plugin node to insert after\n              const importNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"import\"\n              )\n\n              const pluginNodes = root.nodes?.filter(\n                (node): node is AtRule =>\n                  node.type === \"atrule\" && node.name === \"plugin\"\n              )\n\n              if (pluginNodes && pluginNodes.length > 0) {\n                // Insert after the last existing plugin\n                const lastPlugin = pluginNodes[pluginNodes.length - 1]\n                root.insertAfter(lastPlugin, pluginRule)\n              } else if (importNodes && importNodes.length > 0) {\n                // Insert after the last import if no plugins exist\n                const lastImport = importNodes[importNodes.length - 1]\n                root.insertAfter(lastImport, pluginRule)\n                // Add a break comment before the first plugin to create spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              } else {\n                // If no imports or plugins, insert at the beginning\n                root.prepend(pluginRule)\n                // Add a break comment before the first plugin for spacing\n                root.insertBefore(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n                // Add a break comment after the plugin for spacing from other content\n                root.insertAfter(\n                  pluginRule,\n                  postcss.comment({ text: \"---break---\" })\n                )\n              }\n            }\n          }\n          // Check if this is any at-rule with no body (empty object).\n          else if (\n            typeof properties === \"object\" &&\n            Object.keys(properties).length === 0\n          ) {\n            // Handle any at-rule with no body (e.g., @apply, @tailwind, etc.).\n            const atRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!atRule) {\n              const newAtRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true },\n              })\n\n              root.append(newAtRule)\n              root.insertBefore(\n                newAtRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n          }\n          // Special handling for keyframes - place them under @theme inline.\n          else if (name === \"keyframes\") {\n            let themeInline = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"theme\" &&\n                node.params === \"inline\"\n            ) as AtRule | undefined\n\n            if (!themeInline) {\n              themeInline = postcss.atRule({\n                name: \"theme\",\n                params: \"inline\",\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n              root.append(themeInline)\n              root.insertBefore(\n                themeInline,\n                postcss.comment({ text: \"---break---\" })\n              )\n            }\n\n            // Check if a keyframe with the same name already exists\n            const existingKeyframesRule = themeInline.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === \"keyframes\" &&\n                node.params === params\n            )\n\n            let keyframesRule: AtRule\n            if (existingKeyframesRule) {\n              // Replace existing keyframe\n              keyframesRule = postcss.atRule({\n                name: \"keyframes\",\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n              })\n              existingKeyframesRule.replaceWith(keyframesRule)\n            } else {\n              // Create new keyframe\n              keyframesRule = postcss.atRule({\n                name: \"keyframes\",\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n              })\n              themeInline.append(keyframesRule)\n            }\n\n            if (typeof properties === \"object\") {\n              for (const [step, stepProps] of Object.entries(properties)) {\n                processRule(keyframesRule, step, stepProps)\n              }\n            }\n          }\n          // Special handling for utility classes to preserve property values\n          else if (name === \"utility\") {\n            const utilityAtRule = root.nodes?.find(\n              (node): node is AtRule =>\n                node.type === \"atrule\" &&\n                node.name === name &&\n                node.params === params\n            ) as AtRule | undefined\n\n            if (!utilityAtRule) {\n              const atRule = postcss.atRule({\n                name,\n                params,\n                raws: { semicolon: true, between: \" \", before: \"\\n\" },\n              })\n\n              root.append(atRule)\n              root.insertBefore(\n                atRule,\n                postcss.comment({ text: \"---break---\" })\n              )\n\n              // Add declarations with their values preserved\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n                    atRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(atRule, prop, value)\n                  }\n                }\n              }\n            } else {\n              // Update existing utility class\n              if (typeof properties === \"object\") {\n                for (const [prop, value] of Object.entries(properties)) {\n                  if (typeof value === \"string\") {\n                    const existingDecl = utilityAtRule.nodes?.find(\n                      (node): node is Declaration =>\n                        node.type === \"decl\" && node.prop === prop\n                    )\n\n                    const decl = postcss.decl({\n                      prop,\n                      value: value,\n                      raws: { semicolon: true, before: \"\\n    \" },\n                    })\n\n                    existingDecl\n                      ? existingDecl.replaceWith(decl)\n                      : utilityAtRule.append(decl)\n                  } else if (typeof value === \"object\") {\n                    processRule(utilityAtRule, prop, value)\n                  }\n                }\n              }\n            }\n          }\n          // Handle at-property as regular CSS rules\n          else if (name === \"property\") {\n            processRule(root, selector, properties)\n          } else {\n            // Handle other at-rules normally\n            processAtRule(root, name, params, properties)\n          }\n        } else {\n          // Handle regular CSS rules\n          processRule(root, selector, properties)\n        }\n      }\n    },\n  }\n}\n\nfunction processAtRule(\n  root: Root | AtRule,\n  name: string,\n  params: string,\n  properties: any\n) {\n  // Find or create the at-rule\n  let atRule = root.nodes?.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" && node.name === name && node.params === params\n  ) as AtRule | undefined\n\n  if (!atRule) {\n    atRule = postcss.atRule({\n      name,\n      params,\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(atRule)\n    root.insertBefore(atRule, postcss.comment({ text: \"---break---\" }))\n  }\n\n  // Process children of this at-rule\n  if (typeof properties === \"object\") {\n    for (const [childSelector, childProps] of Object.entries(properties)) {\n      if (childSelector.startsWith(\"@\")) {\n        // Nested at-rule\n        const nestedMatch = childSelector.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (nestedMatch) {\n          const [, nestedName, nestedParams] = nestedMatch\n          processAtRule(atRule, nestedName, nestedParams, childProps)\n        }\n      } else {\n        // CSS rule within at-rule\n        processRule(atRule, childSelector, childProps)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the at-rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Create a rule for the at-rule if needed\n        const rule = postcss.rule({\n          selector: \"temp\",\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule.append(clone)\n          }\n        })\n\n        // Only add the rule if it has declarations\n        if (rule.nodes?.length) {\n          atRule.append(rule)\n        }\n      }\n    } catch (error) {\n      console.error(\"Error parsing at-rule content:\", properties, error)\n      throw error\n    }\n  }\n}\n\nfunction processRule(parent: Root | AtRule, selector: string, properties: any) {\n  let rule = parent.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  ) as Rule | undefined\n\n  if (!rule) {\n    rule = postcss.rule({\n      selector,\n      raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n    })\n    parent.append(rule)\n  }\n\n  if (typeof properties === \"object\") {\n    for (const [prop, value] of Object.entries(properties)) {\n      // Check if this is any at-rule with empty object (no body).\n      if (\n        prop.startsWith(\"@\") &&\n        typeof value === \"object\" &&\n        value !== null &&\n        Object.keys(value).length === 0\n      ) {\n        // Parse the at-rule.\n        const atRuleMatch = prop.match(/@([a-zA-Z-]+)\\s*(.*)/)\n        if (atRuleMatch) {\n          const [, atRuleName, atRuleParams] = atRuleMatch\n          const atRule = postcss.atRule({\n            name: atRuleName,\n            params: atRuleParams,\n            raws: { semicolon: true, before: \"\\n    \" },\n          })\n          rule.append(atRule)\n        }\n      } else if (typeof value === \"string\") {\n        const decl = postcss.decl({\n          prop,\n          value: value,\n          raws: { semicolon: true, before: \"\\n    \" },\n        })\n\n        // Replace existing property or add new one.\n        const existingDecl = rule.nodes?.find(\n          (node): node is Declaration =>\n            node.type === \"decl\" && node.prop === prop\n        )\n\n        existingDecl ? existingDecl.replaceWith(decl) : rule.append(decl)\n      } else if (typeof value === \"object\") {\n        // Nested selector (including & selectors).\n        const nestedSelector = prop.startsWith(\"&\")\n          ? selector.replace(/^([^:]+)/, `$1${prop.substring(1)}`)\n          : prop // Use the original selector for other nested elements.\n        processRule(parent, nestedSelector, value)\n      }\n    }\n  } else if (typeof properties === \"string\") {\n    // Direct string content for the rule\n    try {\n      // Parse the CSS string with PostCSS\n      const parsed = postcss.parse(`.temp{${properties}}`)\n      const tempRule = parsed.first as Rule\n\n      if (tempRule && tempRule.nodes) {\n        // Copy all declarations from the temp rule to our actual rule\n        tempRule.nodes.forEach((node) => {\n          if (node.type === \"decl\") {\n            const clone = node.clone()\n            clone.raws.before = \"\\n    \"\n            rule?.append(clone)\n          }\n        })\n      }\n    } catch (error) {\n      console.error(\"Error parsing rule content:\", selector, properties, error)\n      throw error\n    }\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  registryItemCssVarsSchema,\n  registryItemTailwindSchema,\n} from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { TailwindVersion } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport postcss from \"postcss\"\nimport AtRule from \"postcss/lib/at-rule\"\nimport Root from \"postcss/lib/root\"\nimport Rule from \"postcss/lib/rule\"\nimport { z } from \"zod\"\n\nexport async function updateCssVars(\n  cssVars: z.infer<typeof registryItemCssVarsSchema> | undefined,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n    silent?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n  }\n) {\n  if (!config.resolvedPaths.tailwindCss || !Object.keys(cssVars ?? {}).length) {\n    return\n  }\n\n  options = {\n    cleanupDefaultNextStyles: false,\n    silent: false,\n    tailwindVersion: \"v3\",\n    overwriteCssVars: false,\n    initIndex: true,\n    ...options,\n  }\n  const cssFilepath = config.resolvedPaths.tailwindCss\n  const cssFilepathRelative = path.relative(\n    config.resolvedPaths.cwd,\n    cssFilepath\n  )\n  const cssVarsSpinner = spinner(\n    `Updating CSS variables in ${highlighter.info(cssFilepathRelative)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(cssFilepath, \"utf8\")\n  let output = await transformCssVars(raw, cssVars ?? {}, config, {\n    cleanupDefaultNextStyles: options.cleanupDefaultNextStyles,\n    tailwindVersion: options.tailwindVersion,\n    tailwindConfig: options.tailwindConfig,\n    overwriteCssVars: options.overwriteCssVars,\n    initIndex: options.initIndex,\n  })\n  await fs.writeFile(cssFilepath, output, \"utf8\")\n  cssVarsSpinner.succeed()\n}\n\nexport async function transformCssVars(\n  input: string,\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  config: Config,\n  options: {\n    cleanupDefaultNextStyles?: boolean\n    tailwindVersion?: TailwindVersion\n    tailwindConfig?: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n    overwriteCssVars?: boolean\n    initIndex?: boolean\n  } = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: false,\n  }\n) {\n  options = {\n    cleanupDefaultNextStyles: false,\n    tailwindVersion: \"v3\",\n    tailwindConfig: undefined,\n    overwriteCssVars: false,\n    initIndex: false,\n    ...options,\n  }\n\n  let plugins = [updateCssVarsPlugin(cssVars)]\n\n  if (options.cleanupDefaultNextStyles) {\n    plugins.push(cleanupDefaultNextStylesPlugin())\n  }\n\n  if (options.tailwindVersion === \"v4\") {\n    plugins = []\n\n    // Only add tw-animate-css if project does not have tailwindcss-animate\n    if (config.resolvedPaths?.cwd) {\n      const packageInfo = getPackageInfo(config.resolvedPaths.cwd)\n      if (\n        !packageInfo?.dependencies?.[\"tailwindcss-animate\"] &&\n        !packageInfo?.devDependencies?.[\"tailwindcss-animate\"] &&\n        options.initIndex\n      ) {\n        plugins.push(addCustomImport({ params: \"tw-animate-css\" }))\n      }\n    }\n\n    plugins.push(addCustomVariant({ params: \"dark (&:is(.dark *))\" }))\n\n    if (options.cleanupDefaultNextStyles) {\n      plugins.push(cleanupDefaultNextStylesPlugin())\n    }\n\n    plugins.push(\n      updateCssVarsPluginV4(cssVars, {\n        overwriteCssVars: options.overwriteCssVars,\n      })\n    )\n    plugins.push(updateThemePlugin(cssVars))\n\n    if (options.tailwindConfig) {\n      plugins.push(updateTailwindConfigPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigAnimationPlugin(options.tailwindConfig))\n      plugins.push(updateTailwindConfigKeyframesPlugin(options.tailwindConfig))\n    }\n  }\n\n  if (config.tailwind.cssVariables && options.initIndex) {\n    plugins.push(\n      updateBaseLayerPlugin({ tailwindVersion: options.tailwindVersion })\n    )\n  }\n\n  const result = await postcss(plugins).process(input, {\n    from: undefined,\n  })\n\n  let output = result.css\n\n  output = output.replace(/\\/\\* ---break--- \\*\\//g, \"\")\n\n  if (options.tailwindVersion === \"v4\") {\n    output = output.replace(/(\\n\\s*\\n)+/g, \"\\n\\n\")\n  }\n\n  return output\n}\n\nfunction updateBaseLayerPlugin({\n  tailwindVersion,\n}: {\n  tailwindVersion?: TailwindVersion\n}) {\n  return {\n    postcssPlugin: \"update-base-layer\",\n    Once(root: Root) {\n      const requiredRules = [\n        {\n          selector: \"*\",\n          apply:\n            tailwindVersion === \"v4\"\n              ? \"border-border outline-ring/50\"\n              : \"border-border\",\n        },\n        { selector: \"body\", apply: \"bg-background text-foreground\" },\n      ]\n\n      let baseLayer = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\" &&\n          requiredRules.every(({ selector, apply }) =>\n            node.nodes?.some(\n              (rule): rule is Rule =>\n                rule.type === \"rule\" &&\n                rule.selector === selector &&\n                rule.nodes.some(\n                  (applyRule): applyRule is AtRule =>\n                    applyRule.type === \"atrule\" &&\n                    applyRule.name === \"apply\" &&\n                    applyRule.params === apply\n                )\n            )\n          )\n      ) as AtRule | undefined\n\n      if (!baseLayer) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          raws: { semicolon: true, between: \" \", before: \"\\n\" },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      requiredRules.forEach(({ selector, apply }) => {\n        const existingRule = baseLayer?.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!existingRule) {\n          baseLayer?.append(\n            postcss.rule({\n              selector,\n              nodes: [\n                postcss.atRule({\n                  name: \"apply\",\n                  params: apply,\n                  raws: { semicolon: true, before: \"\\n    \" },\n                }),\n              ],\n              raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n            })\n          )\n        }\n      })\n    },\n  }\n}\n\nfunction updateCssVarsPlugin(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>\n) {\n  return {\n    postcssPlugin: \"update-css-vars\",\n    Once(root: Root) {\n      let baseLayer = root.nodes.find(\n        (node) =>\n          node.type === \"atrule\" &&\n          node.name === \"layer\" &&\n          node.params === \"base\"\n      ) as AtRule | undefined\n\n      if (!(baseLayer instanceof AtRule)) {\n        baseLayer = postcss.atRule({\n          name: \"layer\",\n          params: \"base\",\n          nodes: [],\n          raws: {\n            semicolon: true,\n            before: \"\\n\",\n            between: \" \",\n          },\n        })\n        root.append(baseLayer)\n        root.insertBefore(baseLayer, postcss.comment({ text: \"---break---\" }))\n      }\n\n      if (baseLayer !== undefined) {\n        // Add variables for each key in cssVars\n        Object.entries(cssVars).forEach(([key, vars]) => {\n          const selector = key === \"light\" ? \":root\" : `.${key}`\n          // TODO: Fix typecheck.\n          addOrUpdateVars(baseLayer as AtRule, selector, vars)\n        })\n      }\n    },\n  }\n}\n\nfunction removeConflictVars(root: Rule | Root) {\n  const rootRule = root.nodes.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === \":root\"\n  )\n\n  if (rootRule) {\n    const propsToRemove = [\"--background\", \"--foreground\"]\n\n    rootRule.nodes\n      .filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && propsToRemove.includes(node.prop)\n      )\n      .forEach((node) => node.remove())\n\n    if (rootRule.nodes.length === 0) {\n      rootRule.remove()\n    }\n  }\n}\n\nfunction cleanupDefaultNextStylesPlugin() {\n  return {\n    postcssPlugin: \"cleanup-default-next-styles\",\n    Once(root: Root) {\n      const bodyRule = root.nodes.find(\n        (node): node is Rule => node.type === \"rule\" && node.selector === \"body\"\n      )\n      if (bodyRule) {\n        // Remove color from the body node.\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"color\" &&\n              [\"rgb(var(--foreground-rgb))\", \"var(--foreground)\"].includes(\n                node.value\n              )\n          )\n          ?.remove()\n\n        // Remove background: linear-gradient.\n        bodyRule.nodes\n          .find((node): node is postcss.Declaration => {\n            return (\n              node.type === \"decl\" &&\n              node.prop === \"background\" &&\n              // This is only going to run on create project, so all good.\n              (node.value.startsWith(\"linear-gradient\") ||\n                node.value === \"var(--background)\")\n            )\n          })\n          ?.remove()\n\n        // Remove font-family: Arial, Helvetica, sans-serif;\n        bodyRule.nodes\n          .find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" &&\n              node.prop === \"font-family\" &&\n              node.value === \"Arial, Helvetica, sans-serif\"\n          )\n          ?.remove()\n\n        // If the body rule is empty, remove it.\n        if (bodyRule.nodes.length === 0) {\n          bodyRule.remove()\n        }\n      }\n\n      removeConflictVars(root)\n\n      const darkRootRule = root.nodes.find(\n        (node): node is Rule =>\n          node.type === \"atrule\" &&\n          node.params === \"(prefers-color-scheme: dark)\"\n      )\n\n      if (darkRootRule) {\n        removeConflictVars(darkRootRule)\n        if (darkRootRule.nodes.length === 0) {\n          darkRootRule.remove()\n        }\n      }\n    },\n  }\n}\n\nfunction addOrUpdateVars(\n  baseLayer: AtRule,\n  selector: string,\n  vars: Record<string, string>\n) {\n  let ruleNode = baseLayer.nodes?.find(\n    (node): node is Rule => node.type === \"rule\" && node.selector === selector\n  )\n\n  if (!ruleNode) {\n    if (Object.keys(vars).length > 0) {\n      ruleNode = postcss.rule({\n        selector,\n        raws: { between: \" \", before: \"\\n  \" },\n      })\n      baseLayer.append(ruleNode)\n    }\n  }\n\n  Object.entries(vars).forEach(([key, value]) => {\n    const prop = `--${key.replace(/^--/, \"\")}`\n    const newDecl = postcss.decl({\n      prop,\n      value,\n      raws: { semicolon: true },\n    })\n\n    const existingDecl = ruleNode?.nodes.find(\n      (node): node is postcss.Declaration =>\n        node.type === \"decl\" && node.prop === prop\n    )\n\n    existingDecl ? existingDecl.replaceWith(newDecl) : ruleNode?.append(newDecl)\n  })\n}\n\nfunction updateCssVarsPluginV4(\n  cssVars: z.infer<typeof registryItemCssVarsSchema>,\n  options: {\n    overwriteCssVars?: boolean\n  }\n) {\n  return {\n    postcssPlugin: \"update-css-vars-v4\",\n    Once(root: Root) {\n      Object.entries(cssVars).forEach(([key, vars]) => {\n        let selector = key === \"light\" ? \":root\" : `.${key}`\n\n        if (key === \"theme\") {\n          selector = \"@theme\"\n          const themeNode = upsertThemeNode(root)\n          Object.entries(vars).forEach(([key, value]) => {\n            const prop = `--${key.replace(/^--/, \"\")}`\n            const newDecl = postcss.decl({\n              prop,\n              value,\n              raws: { semicolon: true },\n            })\n\n            const existingDecl = themeNode?.nodes?.find(\n              (node): node is postcss.Declaration =>\n                node.type === \"decl\" && node.prop === prop\n            )\n\n            // Only overwrite if overwriteCssVars is true\n            // i.e for registry:theme and registry:style\n            // We do not want new components to overwrite existing vars.\n            // Keep user defined vars.\n            if (options.overwriteCssVars) {\n              if (existingDecl) {\n                existingDecl.replaceWith(newDecl)\n              } else {\n                themeNode?.append(newDecl)\n              }\n            } else {\n              if (!existingDecl) {\n                themeNode?.append(newDecl)\n              }\n            }\n          })\n          return\n        }\n\n        let ruleNode = root.nodes?.find(\n          (node): node is Rule =>\n            node.type === \"rule\" && node.selector === selector\n        )\n\n        if (!ruleNode && Object.keys(vars).length > 0) {\n          ruleNode = postcss.rule({\n            selector,\n            nodes: [],\n            raws: { semicolon: true, between: \" \", before: \"\\n\" },\n          })\n          root.append(ruleNode)\n          root.insertBefore(ruleNode, postcss.comment({ text: \"---break---\" }))\n        }\n\n        Object.entries(vars).forEach(([key, value]) => {\n          let prop = `--${key.replace(/^--/, \"\")}`\n\n          // Special case for sidebar-background.\n          if (prop === \"--sidebar-background\") {\n            prop = \"--sidebar\"\n          }\n\n          if (isLocalHSLValue(value)) {\n            value = `hsl(${value})`\n          }\n\n          const newDecl = postcss.decl({\n            prop,\n            value,\n            raws: { semicolon: true },\n          })\n          const existingDecl = ruleNode?.nodes.find(\n            (node): node is postcss.Declaration =>\n              node.type === \"decl\" && node.prop === prop\n          )\n\n          // Only overwrite if overwriteCssVars is true\n          // i.e for registry:theme and registry:style\n          // We do not want new components to overwrite existing vars.\n          // Keep user defined vars.\n          if (options.overwriteCssVars) {\n            if (existingDecl) {\n              existingDecl.replaceWith(newDecl)\n            } else {\n              ruleNode?.append(newDecl)\n            }\n          } else {\n            if (!existingDecl) {\n              ruleNode?.append(newDecl)\n            }\n          }\n        })\n      })\n    },\n  }\n}\n\nfunction updateThemePlugin(cssVars: z.infer<typeof registryItemCssVarsSchema>) {\n  return {\n    postcssPlugin: \"update-theme\",\n    Once(root: Root) {\n      // Find unique color names from light and dark.\n      const variables = Array.from(\n        new Set(\n          Object.keys(cssVars).flatMap((key) =>\n            Object.keys(cssVars[key as keyof typeof cssVars] || {})\n          )\n        )\n      )\n\n      if (!variables.length) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n\n      const themeVarNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--\")\n      )\n\n      for (const variable of variables) {\n        const value = Object.values(cssVars).find((vars) => vars[variable])?.[\n          variable\n        ]\n\n        if (!value) {\n          continue\n        }\n\n        if (variable === \"radius\") {\n          const radiusVariables = {\n            sm: \"calc(var(--radius) - 4px)\",\n            md: \"calc(var(--radius) - 2px)\",\n            lg: \"var(--radius)\",\n            xl: \"calc(var(--radius) + 4px)\",\n            \"2xl\": \"calc(var(--radius) + 8px)\",\n            \"3xl\": \"calc(var(--radius) + 12px)\",\n            \"4xl\": \"calc(var(--radius) + 16px)\",\n          }\n          for (const [key, value] of Object.entries(radiusVariables)) {\n            const cssVarNode = postcss.decl({\n              prop: `--radius-${key}`,\n              value,\n              raws: { semicolon: true },\n            })\n            if (\n              themeNode?.nodes?.find(\n                (node): node is postcss.Declaration =>\n                  node.type === \"decl\" && node.prop === cssVarNode.prop\n              )\n            ) {\n              continue\n            }\n            themeNode?.append(cssVarNode)\n          }\n          continue\n        }\n\n        let prop =\n          isLocalHSLValue(value) || isColorValue(value)\n            ? `--color-${variable.replace(/^--/, \"\")}`\n            : `--${variable.replace(/^--/, \"\")}`\n        if (prop === \"--color-sidebar-background\") {\n          prop = \"--color-sidebar\"\n        }\n\n        let propValue = `var(--${variable})`\n        if (prop === \"--color-sidebar\") {\n          propValue = \"var(--sidebar)\"\n        }\n\n        const cssVarNode = postcss.decl({\n          prop,\n          value: propValue,\n          raws: { semicolon: true },\n        })\n        const existingDecl = themeNode?.nodes?.find(\n          (node): node is postcss.Declaration =>\n            node.type === \"decl\" && node.prop === cssVarNode.prop\n        )\n        if (!existingDecl) {\n          if (themeVarNodes?.length) {\n            themeNode?.insertAfter(\n              themeVarNodes[themeVarNodes.length - 1],\n              cssVarNode\n            )\n          } else {\n            themeNode?.append(cssVarNode)\n          }\n        }\n      }\n    },\n  }\n}\n\nfunction upsertThemeNode(root: Root): AtRule {\n  let themeNode = root.nodes.find(\n    (node): node is AtRule =>\n      node.type === \"atrule\" &&\n      node.name === \"theme\" &&\n      node.params === \"inline\"\n  )\n\n  if (!themeNode) {\n    themeNode = postcss.atRule({\n      name: \"theme\",\n      params: \"inline\",\n      nodes: [],\n      raws: { semicolon: true, between: \" \", before: \"\\n\" },\n    })\n    root.append(themeNode)\n    root.insertBefore(themeNode, postcss.comment({ text: \"---break---\" }))\n  }\n\n  return themeNode\n}\n\nfunction addCustomVariant({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-variant\",\n    Once(root: Root) {\n      const customVariant = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      if (!customVariant) {\n        // Find all import nodes\n        const importNodes = root.nodes.filter(\n          (node): node is AtRule =>\n            node.type === \"atrule\" && node.name === \"import\"\n        )\n\n        const variantNode = postcss.atRule({\n          name: \"custom-variant\",\n          params,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // Insert after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, variantNode)\n        } else {\n          // If no imports, insert after the first node\n          root.insertAfter(root.nodes[0], variantNode)\n        }\n\n        root.insertBefore(variantNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction addCustomImport({ params }: { params: string }) {\n  return {\n    postcssPlugin: \"add-custom-import\",\n    Once(root: Root) {\n      const importNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"import\"\n      )\n\n      // Find custom variant node (to ensure we insert before it)\n      const customVariantNode = root.nodes.find(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"custom-variant\"\n      )\n\n      // Check if our specific import already exists\n      const hasImport = importNodes.some(\n        (node) => node.params.replace(/[\"']/g, \"\") === params\n      )\n\n      if (!hasImport) {\n        const importNode = postcss.atRule({\n          name: \"import\",\n          params: `\"${params}\"`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n\n        if (importNodes.length > 0) {\n          // If there are existing imports, add after the last import\n          const lastImport = importNodes[importNodes.length - 1]\n          root.insertAfter(lastImport, importNode)\n        } else if (customVariantNode) {\n          // If no imports but has custom-variant, insert before it\n          root.insertBefore(customVariantNode, importNode)\n          root.insertBefore(\n            customVariantNode,\n            postcss.comment({ text: \"---break---\" })\n          )\n        } else {\n          // If no imports and no custom-variant, insert at the start\n          root.prepend(importNode)\n          root.insertAfter(importNode, postcss.comment({ text: \"---break---\" }))\n        }\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config\",\n    Once(root: Root) {\n      if (!tailwindConfig?.plugins) {\n        return\n      }\n\n      const quoteType = getQuoteType(root)\n      const quote = quoteType === \"single\" ? \"'\" : '\"'\n\n      const pluginNodes = root.nodes.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"plugin\"\n      )\n\n      const lastPluginNode =\n        pluginNodes[pluginNodes.length - 1] || root.nodes[0]\n\n      for (const plugin of tailwindConfig.plugins) {\n        const pluginName = plugin.replace(/^require\\([\"']|[\"']\\)$/g, \"\")\n\n        // Check if the plugin is already present.\n        if (\n          pluginNodes.some((node) => {\n            return node.params.replace(/[\"']/g, \"\") === pluginName\n          })\n        ) {\n          continue\n        }\n\n        const pluginNode = postcss.atRule({\n          name: \"plugin\",\n          params: `${quote}${pluginName}${quote}`,\n          raws: { semicolon: true, before: \"\\n\" },\n        })\n        root.insertAfter(lastPluginNode, pluginNode)\n        root.insertBefore(pluginNode, postcss.comment({ text: \"---break---\" }))\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigKeyframesPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-keyframes\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.keyframes) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingKeyFrameNodes = themeNode.nodes?.filter(\n        (node): node is AtRule =>\n          node.type === \"atrule\" && node.name === \"keyframes\"\n      )\n\n      const keyframeValueSchema = z.record(\n        z.string(),\n        z.record(z.string(), z.string())\n      )\n\n      for (const [keyframeName, keyframeValue] of Object.entries(\n        tailwindConfig.theme.extend.keyframes\n      )) {\n        if (typeof keyframeName !== \"string\") {\n          continue\n        }\n\n        const parsedKeyframeValue = keyframeValueSchema.safeParse(keyframeValue)\n\n        if (!parsedKeyframeValue.success) {\n          continue\n        }\n\n        if (\n          existingKeyFrameNodes?.find(\n            (node): node is postcss.AtRule =>\n              node.type === \"atrule\" &&\n              node.name === \"keyframes\" &&\n              node.params === keyframeName\n          )\n        ) {\n          continue\n        }\n\n        const keyframeNode = postcss.atRule({\n          name: \"keyframes\",\n          params: keyframeName,\n          nodes: [],\n          raws: { semicolon: true, between: \" \", before: \"\\n  \" },\n        })\n\n        for (const [key, values] of Object.entries(parsedKeyframeValue.data)) {\n          const rule = postcss.rule({\n            selector: key,\n            nodes: Object.entries(values).map(([key, value]) =>\n              postcss.decl({\n                prop: key,\n                value,\n                raws: { semicolon: true, before: \"\\n      \", between: \": \" },\n              })\n            ),\n            raws: { semicolon: true, between: \" \", before: \"\\n    \" },\n          })\n          keyframeNode.append(rule)\n        }\n\n        themeNode.append(keyframeNode)\n        themeNode.insertBefore(\n          keyframeNode,\n          postcss.comment({ text: \"---break---\" })\n        )\n      }\n    },\n  }\n}\n\nfunction updateTailwindConfigAnimationPlugin(\n  tailwindConfig: z.infer<typeof registryItemTailwindSchema>[\"config\"]\n) {\n  return {\n    postcssPlugin: \"update-tailwind-config-animation\",\n    Once(root: Root) {\n      if (!tailwindConfig?.theme?.extend?.animation) {\n        return\n      }\n\n      const themeNode = upsertThemeNode(root)\n      const existingAnimationNodes = themeNode.nodes?.filter(\n        (node): node is postcss.Declaration =>\n          node.type === \"decl\" && node.prop.startsWith(\"--animate-\")\n      )\n\n      const parsedAnimationValue = z\n        .record(z.string(), z.string())\n        .safeParse(tailwindConfig.theme.extend.animation)\n      if (!parsedAnimationValue.success) {\n        return\n      }\n\n      for (const [key, value] of Object.entries(parsedAnimationValue.data)) {\n        const prop = `--animate-${key}`\n        if (\n          existingAnimationNodes?.find(\n            (node): node is postcss.Declaration => node.prop === prop\n          )\n        ) {\n          continue\n        }\n\n        const animationNode = postcss.decl({\n          prop,\n          value,\n          raws: { semicolon: true, between: \": \", before: \"\\n  \" },\n        })\n        themeNode.append(animationNode)\n      }\n    },\n  }\n}\n\nfunction getQuoteType(root: Root): \"single\" | \"double\" {\n  const firstNode = root.nodes[0]\n  const raw = firstNode.toString()\n\n  if (raw.includes(\"'\")) {\n    return \"single\"\n  }\n  return \"double\"\n}\n\nexport function isLocalHSLValue(value: string) {\n  if (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\")\n  ) {\n    return false\n  }\n\n  const chunks = value.split(\" \")\n\n  return (\n    chunks.length === 3 &&\n    chunks.slice(1, 3).every((chunk) => chunk.includes(\"%\"))\n  )\n}\n\nexport function isColorValue(value: string) {\n  return (\n    value.startsWith(\"hsl\") ||\n    value.startsWith(\"rgb\") ||\n    value.startsWith(\"#\") ||\n    value.startsWith(\"oklch\") ||\n    value.includes(\"--color-\")\n  )\n}\n","import { RegistryItem } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport prompts from \"prompts\"\n\nexport async function updateDependencies(\n  dependencies: RegistryItem[\"dependencies\"],\n  devDependencies: RegistryItem[\"devDependencies\"],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  dependencies = Array.from(new Set(dependencies))\n  devDependencies = Array.from(new Set(devDependencies))\n\n  if (!dependencies?.length && !devDependencies?.length) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const dependenciesSpinner = spinner(`Installing dependencies.`, {\n    silent: options.silent,\n  })?.start()\n  const packageManager = await getUpdateDependenciesPackageManager(config)\n\n  // Offer to use --force or --legacy-peer-deps if using React 19 with npm.\n  let flag = \"\"\n  if (shouldPromptForNpmFlag(config) && packageManager === \"npm\") {\n    if (options.silent) {\n      flag = \"force\"\n    } else {\n      dependenciesSpinner.stopAndPersist()\n      logger.warn(\n        \"\\nIt looks like you are using React 19. \\nSome packages may fail to install due to peer dependency issues in npm (see https://ui.shadcn.com/react-19).\\n\"\n      )\n      const confirmation = await prompts([\n        {\n          type: \"select\",\n          name: \"flag\",\n          message: \"How would you like to proceed?\",\n          choices: [\n            { title: \"Use --force\", value: \"force\" },\n            { title: \"Use --legacy-peer-deps\", value: \"legacy-peer-deps\" },\n          ],\n        },\n      ])\n\n      if (confirmation) {\n        flag = confirmation.flag\n      }\n    }\n  }\n\n  dependenciesSpinner?.start()\n\n  await installWithPackageManager(\n    packageManager,\n    dependencies,\n    devDependencies,\n    config.resolvedPaths.cwd,\n    flag\n  )\n\n  dependenciesSpinner?.succeed()\n}\n\nfunction shouldPromptForNpmFlag(config: Config) {\n  const packageInfo = getPackageInfo(config.resolvedPaths.cwd, false)\n\n  if (!packageInfo?.dependencies?.react) {\n    return false\n  }\n\n  const hasReact19 = /^(?:\\^|~)?19(?:\\.\\d+)*(?:-.*)?$/.test(\n    packageInfo.dependencies.react\n  )\n  const hasReactDayPicker8 =\n    packageInfo.dependencies[\"react-day-picker\"]?.startsWith(\"8\")\n\n  return hasReact19 && hasReactDayPicker8\n}\n\nasync function getUpdateDependenciesPackageManager(config: Config) {\n  const expoVersion = getPackageInfo(config.resolvedPaths.cwd, false)\n    ?.dependencies?.expo\n\n  if (expoVersion) {\n    // Ensures package versions match the React Native version.\n    // https://docs.expo.dev/more/expo-cli/#install\n    return \"expo\"\n  }\n\n  return getPackageManager(config.resolvedPaths.cwd)\n}\n\nasync function installWithPackageManager(\n  packageManager: Awaited<\n    ReturnType<typeof getUpdateDependenciesPackageManager>\n  >,\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (packageManager === \"npm\") {\n    return installWithNpm(dependencies, devDependencies, cwd, flag)\n  }\n\n  if (packageManager === \"deno\") {\n    return installWithDeno(dependencies, devDependencies, cwd)\n  }\n\n  if (packageManager === \"expo\") {\n    return installWithExpo(dependencies, devDependencies, cwd)\n  }\n\n  if (dependencies?.length) {\n    await execa(packageManager, [\"add\", ...dependencies], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(packageManager, [\"add\", \"-D\", ...devDependencies], { cwd })\n  }\n}\n\nasync function installWithNpm(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string,\n  flag?: string\n) {\n  if (dependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), ...dependencies],\n      { cwd }\n    )\n  }\n\n  if (devDependencies.length) {\n    await execa(\n      \"npm\",\n      [\"install\", ...(flag ? [`--${flag}`] : []), \"-D\", ...devDependencies],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithDeno(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies?.length) {\n    await execa(\"deno\", [\"add\", ...dependencies.map((dep) => `npm:${dep}`)], {\n      cwd,\n    })\n  }\n\n  if (devDependencies?.length) {\n    await execa(\n      \"deno\",\n      [\"add\", \"-D\", ...devDependencies.map((dep) => `npm:${dep}`)],\n      { cwd }\n    )\n  }\n}\n\nasync function installWithExpo(\n  dependencies: string[],\n  devDependencies: string[],\n  cwd: string\n) {\n  if (dependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", ...dependencies], { cwd })\n  }\n\n  if (devDependencies.length) {\n    await execa(\"npx\", [\"expo\", \"install\", \"-- -D\", ...devDependencies], {\n      cwd,\n    })\n  }\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { registryItemEnvVarsSchema } from \"@/src/schema\"\nimport {\n  findExistingEnvFile,\n  getNewEnvKeys,\n  mergeEnvContent,\n} from \"@/src/utils/env-helpers\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { z } from \"zod\"\n\nexport async function updateEnvVars(\n  envVars: z.infer<typeof registryItemEnvVarsSchema> | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!envVars || Object.keys(envVars).length === 0) {\n    return {\n      envVarsAdded: [],\n      envFileUpdated: null,\n      envFileCreated: null,\n    }\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const envSpinner = spinner(`Adding environment variables.`, {\n    silent: options.silent,\n  })?.start()\n\n  const projectRoot = config.resolvedPaths.cwd\n\n  // Find existing env file or use .env.local as default.\n  let envFilePath = path.join(projectRoot, \".env.local\")\n  const existingEnvFile = findExistingEnvFile(projectRoot)\n\n  if (existingEnvFile) {\n    envFilePath = existingEnvFile\n  }\n\n  const envFileExists = existsSync(envFilePath)\n  const envFileName = path.basename(envFilePath)\n\n  // Convert envVars object to env file format\n  const newEnvContent = Object.entries(envVars)\n    .map(([key, value]) => `${key}=${value}`)\n    .join(\"\\n\")\n\n  let envVarsAdded: string[] = []\n  let envFileUpdated: string | null = null\n  let envFileCreated: string | null = null\n\n  if (envFileExists) {\n    const existingContent = await fs.readFile(envFilePath, \"utf-8\")\n    const mergedContent = mergeEnvContent(existingContent, newEnvContent)\n    envVarsAdded = getNewEnvKeys(existingContent, newEnvContent)\n\n    if (envVarsAdded.length > 0) {\n      await fs.writeFile(envFilePath, mergedContent, \"utf-8\")\n      envFileUpdated = path.relative(projectRoot, envFilePath)\n\n      envSpinner?.succeed(\n        `Added the following variables to ${highlighter.info(envFileName)}:`\n      )\n\n      if (!options.silent) {\n        for (const key of envVarsAdded) {\n          logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n        }\n      }\n    } else {\n      envSpinner?.stop()\n    }\n  } else {\n    // Create new env file\n    await fs.writeFile(envFilePath, newEnvContent + \"\\n\", \"utf-8\")\n    envFileCreated = path.relative(projectRoot, envFilePath)\n    envVarsAdded = Object.keys(envVars)\n\n    envSpinner?.succeed(\n      `Added the following variables to ${highlighter.info(envFileName)}:`\n    )\n\n    if (!options.silent) {\n      for (const key of envVarsAdded) {\n        logger.log(`  ${highlighter.success(\"+\")} ${key}`)\n      }\n    }\n  }\n\n  if (!options.silent && envVarsAdded.length > 0) {\n    logger.break()\n  }\n\n  return {\n    envVarsAdded,\n    envFileUpdated,\n    envFileCreated,\n  }\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport { RegistryFontItem, registryResolvedItemsTreeSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport {\n  CallExpression,\n  Project,\n  ScriptKind,\n  SyntaxKind,\n  VariableDeclarationKind,\n} from \"ts-morph\"\nimport z from \"zod\"\n\nexport async function massageTreeForFonts(\n  tree: z.infer<typeof registryResolvedItemsTreeSchema>,\n  config: Config\n) {\n  if (!tree.fonts?.length) {\n    return tree\n  }\n\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n\n  if (!projectInfo) {\n    return tree\n  }\n\n  const [fontSans] = tree.fonts\n  tree.cssVars ??= {}\n  tree.cssVars.theme ??= {}\n\n  if (\n    projectInfo.framework.name === \"next-app\" ||\n    projectInfo.framework.name === \"next-pages\"\n  ) {\n    tree.cssVars.theme[\n      fontSans.font.variable\n    ] = `var(${fontSans.font.variable})`\n    return tree\n  }\n\n  // Other frameworks will use fontsource for now.\n  const fontName = fontSans.name.replace(\"font-\", \"\")\n  const fontSourceDependency = `@fontsource-variable/${fontName}`\n  tree.dependencies ??= []\n  tree.dependencies.push(fontSourceDependency)\n  tree.css ??= {}\n  tree.css[`@import \"${fontSourceDependency}\"`] = {}\n  tree.css[\"@layer base\"] ??= {}\n  tree.css[\"@layer base\"].html = {\n    \"@apply font-sans\": {},\n  }\n  tree.css[\"@layer base\"].body = {\n    \"@apply font-sans bg-background text-foreground\": {},\n  }\n  tree.cssVars.theme[fontSans.font.variable] = fontSans.font.family\n\n  //   tree.docs += `## Fonts\n  // The ${highlighter.info(\n  //     fontSans.title ?? \"\"\n  //   )} font has been added to your project.\n\n  // If you have existing font-family declarations, you may need to update them to use the new ${highlighter.info(\n  //     fontSans.font.variable\n  //   )} variable.\n\n  // @theme inline {\n  //   ${fontSans.font.variable}: ${fontSans.font.family};\n  // }\n  //   `\n\n  return tree\n}\n\nexport async function updateFonts(\n  fonts: RegistryFontItem[] | undefined,\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!fonts?.length) {\n    return\n  }\n\n  const projectInfo = await getProjectInfo(config.resolvedPaths.cwd)\n\n  if (!projectInfo) {\n    return\n  }\n\n  if (\n    projectInfo.framework.name !== \"next-app\" &&\n    projectInfo.framework.name !== \"next-pages\"\n  ) {\n    return\n  }\n\n  const fontsSpinner = spinner(\"Updating fonts.\", {\n    silent: options.silent,\n  })?.start()\n\n  try {\n    await updateNextFonts(fonts, config, projectInfo)\n    fontsSpinner?.succeed(\"Updating fonts.\")\n  } catch (error) {\n    fontsSpinner?.fail(`Failed to update fonts.`)\n    throw error\n  }\n}\n\nasync function updateNextFonts(\n  fonts: RegistryFontItem[],\n  config: Config,\n  projectInfo: ProjectInfo\n) {\n  // Find layout file.\n  const layoutPath = await findLayoutFile(config, projectInfo)\n\n  if (!layoutPath) {\n    return\n  }\n\n  const layoutContent = await fs.readFile(layoutPath, \"utf-8\")\n  const updatedContent = await transformLayoutFonts(\n    layoutContent,\n    fonts,\n    config\n  )\n\n  if (updatedContent !== layoutContent) {\n    await fs.writeFile(layoutPath, updatedContent, \"utf-8\")\n  }\n}\n\nasync function findLayoutFile(\n  config: Config,\n  projectInfo: ProjectInfo\n): Promise<string | null> {\n  const cwd = config.resolvedPaths.cwd\n  const isSrcDir = projectInfo.isSrcDir\n  const isTsx = projectInfo.isTsx\n  const ext = isTsx ? \"tsx\" : \"jsx\"\n\n  const possiblePaths = isSrcDir\n    ? [`src/app/layout.${ext}`, `app/layout.${ext}`]\n    : [`app/layout.${ext}`]\n\n  for (const relativePath of possiblePaths) {\n    const fullPath = path.join(cwd, relativePath)\n    if (existsSync(fullPath)) {\n      return fullPath\n    }\n  }\n\n  return null\n}\n\nexport async function transformLayoutFonts(\n  input: string,\n  fonts: RegistryFontItem[],\n  _config: Config\n) {\n  const project = new Project({\n    compilerOptions: {},\n  })\n\n  const sourceFile = project.createSourceFile(\"layout.tsx\", input, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  // Only process Google fonts for now.\n  const googleFonts = fonts.filter((f) => f.font.provider === \"google\")\n\n  // Track which font variables we're adding.\n  const fontVariableNames: string[] = []\n\n  // Process Google fonts.\n  for (const font of googleFonts) {\n    const importName = font.font.import\n    if (!importName) {\n      continue\n    }\n\n    // Generate a variable name from the import (e.g., \"Inter\" -> \"inter\", \"Geist_Mono\" -> \"geistMono\").\n    const varName = toCamelCase(importName)\n\n    // Check if import already exists.\n    const existingImport = sourceFile.getImportDeclaration((decl) => {\n      const moduleSpecifier = decl.getModuleSpecifierValue()\n      return moduleSpecifier === \"next/font/google\"\n    })\n\n    // Build font options.\n    const fontOptions = buildFontOptions(font)\n\n    if (existingImport) {\n      // Check if this specific font is already imported.\n      const namedImports = existingImport.getNamedImports()\n      const hasImport = namedImports.some((imp) => imp.getName() === importName)\n\n      if (!hasImport) {\n        existingImport.addNamedImport(importName)\n      }\n    } else {\n      // Add new import.\n      sourceFile.addImportDeclaration({\n        moduleSpecifier: \"next/font/google\",\n        namedImports: [importName],\n      })\n    }\n\n    // Check if variable declaration already exists with same variable CSS property.\n    const existingVarDecl = findFontVariableDeclaration(\n      sourceFile,\n      font.font.variable\n    )\n\n    if (existingVarDecl) {\n      // Replace the initializer of the existing declaration.\n      existingVarDecl.setInitializer(`${importName}(${fontOptions})`)\n      // Update the variable name if different.\n      if (existingVarDecl.getName() !== varName) {\n        existingVarDecl.rename(varName)\n      }\n    } else {\n      // Find the last import or existing font declaration to insert after.\n      const insertPosition = findInsertPosition(sourceFile)\n\n      // Add variable declaration.\n      const statement = sourceFile.insertVariableStatement(insertPosition, {\n        declarationKind: VariableDeclarationKind.Const,\n        declarations: [\n          {\n            name: varName,\n            initializer: `${importName}(${fontOptions})`,\n          },\n        ],\n      })\n\n      // Add a blank line after the declaration.\n      statement.appendWhitespace(\"\\n\")\n    }\n\n    fontVariableNames.push(varName)\n  }\n\n  // Update html className to include font variables.\n  if (fontVariableNames.length > 0) {\n    updateHtmlClassName(sourceFile, fontVariableNames)\n  }\n\n  return sourceFile.getFullText()\n}\n\nfunction buildFontOptions(font: RegistryFontItem) {\n  const options: Record<string, unknown> = {}\n\n  if (font.font.subsets?.length) {\n    options.subsets = font.font.subsets\n  }\n\n  if (font.font.weight?.length) {\n    options.weight = font.font.weight\n  }\n\n  options.variable = font.font.variable\n\n  return JSON.stringify(options)\n    .replace(/\"([^\"]+)\":/g, \"$1:\") // Remove quotes from keys.\n    .replace(/\"/g, \"'\") // Use single quotes for strings.\n}\n\nfunction toCamelCase(str: string) {\n  // Convert \"Geist_Mono\" -> \"geistMono\", \"Inter\" -> \"inter\".\n  return str\n    .split(\"_\")\n    .map((part, index) =>\n      index === 0\n        ? part.toLowerCase()\n        : part.charAt(0).toUpperCase() + part.slice(1).toLowerCase()\n    )\n    .join(\"\")\n}\n\nfunction findFontVariableDeclaration(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>,\n  variable: string\n) {\n  // Find variable declarations that call a font function with matching variable.\n  const variableStatements = sourceFile.getVariableStatements()\n\n  for (const statement of variableStatements) {\n    for (const declaration of statement.getDeclarations()) {\n      const initializer = declaration.getInitializer()\n      if (!initializer) continue\n\n      // Check if it's a call expression.\n      if (initializer.getKind() !== SyntaxKind.CallExpression) continue\n\n      const callExpr = initializer as CallExpression\n\n      // Get the arguments.\n      const args = callExpr.getArguments()\n      if (args.length === 0) continue\n\n      // Check if any argument contains our variable.\n      const argText = args[0].getText()\n      if (argText.includes(`variable:`) && argText.includes(variable)) {\n        return declaration\n      }\n    }\n  }\n\n  return null\n}\n\nfunction findInsertPosition(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>\n) {\n  const imports = sourceFile.getImportDeclarations()\n  if (imports.length > 0) {\n    const lastImport = imports[imports.length - 1]\n    return lastImport.getChildIndex() + 1\n  }\n  return 0\n}\n\nfunction updateHtmlClassName(\n  sourceFile: ReturnType<Project[\"createSourceFile\"]>,\n  fontVariableNames: string[]\n) {\n  // Find the <html> JSX element.\n  const jsxElements = sourceFile.getDescendantsOfKind(\n    SyntaxKind.JsxOpeningElement\n  )\n\n  for (const element of jsxElements) {\n    const tagName = element.getTagNameNode().getText()\n    if (tagName !== \"html\") continue\n\n    const classNameAttr = element.getAttribute(\"className\")\n    if (!classNameAttr) {\n      // Add className attribute with font variables.\n      const variableExpressions = fontVariableNames\n        .map((name) => `${name}.variable`)\n        .join(\", \")\n\n      if (fontVariableNames.length === 1) {\n        element.addAttribute({\n          name: \"className\",\n          initializer: `{${variableExpressions}}`,\n        })\n      } else {\n        // Need to use cn() for multiple fonts.\n        ensureCnImport(sourceFile)\n        element.addAttribute({\n          name: \"className\",\n          initializer: `{cn(${variableExpressions})}`,\n        })\n      }\n      return\n    }\n\n    // Handle existing className.\n    if (classNameAttr.getKind() !== SyntaxKind.JsxAttribute) {\n      return\n    }\n\n    const jsxAttr = classNameAttr.asKindOrThrow(SyntaxKind.JsxAttribute)\n    const initializer = jsxAttr.getInitializer()\n\n    if (!initializer) return\n\n    // Build the new variable expressions.\n    const newVarExpressions = fontVariableNames.map(\n      (name) => `${name}.variable`\n    )\n\n    if (initializer.getKind() === SyntaxKind.StringLiteral) {\n      // className=\"some-class\" -> className={cn(\"some-class\", font.variable)}\n      const currentValue = initializer.getText().slice(1, -1) // Remove quotes.\n      ensureCnImport(sourceFile)\n      jsxAttr.setInitializer(\n        `{cn(\"${currentValue}\", ${newVarExpressions.join(\", \")})}`\n      )\n    } else if (initializer.getKind() === SyntaxKind.JsxExpression) {\n      // className={...} - need to analyze the expression.\n      const jsxExpr = initializer.asKindOrThrow(SyntaxKind.JsxExpression)\n      const expr = jsxExpr.getExpression()\n      if (!expr) return\n\n      const exprText = expr.getText()\n\n      // Check if it's already using cn().\n      if (exprText.startsWith(\"cn(\")) {\n        // Check if cn() already has exactly our font variables.\n        const hasAllFontVars = newVarExpressions.every((v) =>\n          exprText.includes(v)\n        )\n        if (hasAllFontVars) {\n          // Already has our font variables, skip.\n          continue\n        }\n\n        // Remove existing font variables and add new ones.\n        const cleanedExpr = removeFontVariablesFromCn(exprText)\n        const newExpr = insertFontVariablesIntoCn(\n          cleanedExpr,\n          newVarExpressions\n        )\n        jsxExpr.replaceWithText(`{${newExpr}}`)\n      } else if (/^\\w+\\.variable$/.test(exprText)) {\n        // Single font variable like {inter.variable}.\n        // Check if it's already one of our font variables.\n        if (newVarExpressions.includes(exprText)) {\n          // Already using our font variable, skip.\n          continue\n        }\n        // Replace with our font variables.\n        if (newVarExpressions.length === 1) {\n          jsxExpr.replaceWithText(`{${newVarExpressions[0]}}`)\n        } else {\n          ensureCnImport(sourceFile)\n          jsxExpr.replaceWithText(`{cn(${newVarExpressions.join(\", \")})}`)\n        }\n      } else if (exprText.startsWith(\"`\") && exprText.endsWith(\"`\")) {\n        // Template literal - parse and convert to cn() arguments.\n        const cnArgs = parseTemplateLiteralToCnArgs(exprText)\n        ensureCnImport(sourceFile)\n        jsxExpr.replaceWithText(\n          `{cn(${[...cnArgs, ...newVarExpressions].join(\", \")})}`\n        )\n      } else {\n        // Some other expression (variable, etc.), wrap with cn().\n        ensureCnImport(sourceFile)\n        jsxExpr.replaceWithText(\n          `{cn(${exprText}, ${newVarExpressions.join(\", \")})}`\n        )\n      }\n    }\n  }\n}\n\nfunction ensureCnImport(sourceFile: ReturnType<Project[\"createSourceFile\"]>) {\n  const existingImport = sourceFile.getImportDeclaration((decl) => {\n    const namedImports = decl.getNamedImports()\n    return namedImports.some((imp) => imp.getName() === \"cn\")\n  })\n\n  if (!existingImport) {\n    // Try to find the lib/utils import pattern.\n    const utilsImport = sourceFile.getImportDeclaration((decl) => {\n      const moduleSpecifier = decl.getModuleSpecifierValue()\n      return moduleSpecifier.includes(\"/lib/utils\")\n    })\n\n    if (utilsImport) {\n      const namedImports = utilsImport.getNamedImports()\n      if (!namedImports.some((imp) => imp.getName() === \"cn\")) {\n        utilsImport.addNamedImport(\"cn\")\n      }\n    } else {\n      // Add a new import for cn.\n      sourceFile.addImportDeclaration({\n        moduleSpecifier: \"@/lib/utils\",\n        namedImports: [\"cn\"],\n      })\n    }\n  }\n}\n\nfunction parseTemplateLiteralToCnArgs(templateLiteral: string) {\n  // Parse template literal like `${geistSans.variable} ${geistMono.variable} antialiased`\n  // into cn() arguments with static strings first, then variables:\n  // [\"antialiased\", geistSans.variable, geistMono.variable]\n  const staticArgs: string[] = []\n  const variableArgs: string[] = []\n\n  // Remove the backticks.\n  const content = templateLiteral.slice(1, -1)\n\n  // Split by ${...} expressions and static parts.\n  const parts = content.split(/(\\$\\{[^}]+\\})/)\n\n  for (const part of parts) {\n    if (!part) continue\n\n    if (part.startsWith(\"${\") && part.endsWith(\"}\")) {\n      // Expression like ${geistSans.variable}.\n      const expr = part.slice(2, -1).trim()\n      if (expr) {\n        variableArgs.push(expr)\n      }\n    } else {\n      // Static string - split by whitespace and add non-empty parts as quoted strings.\n      const staticParts = part.trim().split(/\\s+/).filter(Boolean)\n      for (const staticPart of staticParts) {\n        staticArgs.push(`\"${staticPart}\"`)\n      }\n    }\n  }\n\n  // Return static strings first, then variables.\n  return [...staticArgs, ...variableArgs]\n}\n\nfunction removeFontVariablesFromCn(cnExpr: string) {\n  // Remove patterns like \"fontName.variable\" from cn() call.\n  // This is a simple regex-based approach.\n  return cnExpr.replace(/,?\\s*\\w+\\.variable/g, \"\").replace(/cn\\(\\s*,/, \"cn(\")\n}\n\nfunction insertFontVariablesIntoCn(cnExpr: string, fontVars: string[]) {\n  // Insert font variables at the end of cn() arguments.\n  const varsStr = fontVars.join(\", \")\n  return cnExpr.replace(/\\)$/, `, ${varsStr})`)\n}\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { resolveRegistryTree } from \"@/src/registry/resolver\"\nimport {\n  configSchema,\n  registryItemFileSchema,\n  registryItemSchema,\n  workspaceConfigSchema,\n} from \"@/src/schema\"\nimport {\n  findCommonRoot,\n  findPackageRoot,\n  getWorkspaceConfig,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport { getProjectTailwindVersionFromConfig } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { isSafeTarget } from \"@/src/utils/is-safe-target\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateCss } from \"@/src/utils/updaters/update-css\"\nimport { updateCssVars } from \"@/src/utils/updaters/update-css-vars\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { updateEnvVars } from \"@/src/utils/updaters/update-env-vars\"\nimport { updateFiles } from \"@/src/utils/updaters/update-files\"\nimport {\n  massageTreeForFonts,\n  updateFonts,\n} from \"@/src/utils/updaters/update-fonts\"\nimport { updateTailwindConfig } from \"@/src/utils/updaters/update-tailwind-config\"\nimport { z } from \"zod\"\n\nexport async function addComponents(\n  components: string[],\n  config: Config,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    baseStyle?: boolean\n    registryHeaders?: Record<string, Record<string, string>>\n    path?: string\n  }\n) {\n  options = {\n    overwrite: false,\n    silent: false,\n    isNewProject: false,\n    baseStyle: true,\n    ...options,\n  }\n\n  const workspaceConfig = await getWorkspaceConfig(config)\n  if (\n    workspaceConfig &&\n    workspaceConfig.ui &&\n    workspaceConfig.ui.resolvedPaths.cwd !== config.resolvedPaths.cwd\n  ) {\n    return await addWorkspaceComponents(components, config, workspaceConfig, {\n      ...options,\n      isRemote:\n        components?.length === 1 && !!components[0].match(/\\/chat\\/b\\//),\n    })\n  }\n\n  return await addProjectComponents(components, config, options)\n}\n\nasync function addProjectComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    baseStyle?: boolean\n    path?: string\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  let tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(config)\n\n  tree = await massageTreeForFonts(tree, config)\n\n  await updateTailwindConfig(tree.tailwind?.config, config, {\n    silent: options.silent,\n    tailwindVersion,\n  })\n\n  const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n  await updateCssVars(tree.cssVars, config, {\n    cleanupDefaultNextStyles: options.isNewProject,\n    silent: options.silent,\n    tailwindVersion,\n    tailwindConfig: tree.tailwind?.config,\n    overwriteCssVars,\n    initIndex: options.baseStyle,\n  })\n\n  // Add CSS updater\n  await updateCss(tree.css, config, {\n    silent: options.silent,\n  })\n\n  await updateEnvVars(tree.envVars, config, {\n    silent: options.silent,\n  })\n\n  await updateDependencies(tree.dependencies, tree.devDependencies, config, {\n    silent: options.silent,\n  })\n\n  await updateFonts(tree.fonts, config, {\n    silent: options.silent,\n  })\n\n  await updateFiles(tree.files, config, {\n    overwrite: options.overwrite,\n    silent: options.silent,\n    path: options.path,\n  })\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function addWorkspaceComponents(\n  components: string[],\n  config: z.infer<typeof configSchema>,\n  workspaceConfig: z.infer<typeof workspaceConfigSchema>,\n  options: {\n    overwrite?: boolean\n    silent?: boolean\n    isNewProject?: boolean\n    isRemote?: boolean\n    baseStyle?: boolean\n    path?: string\n  }\n) {\n  if (!options.baseStyle && !components.length) {\n    return\n  }\n\n  const registrySpinner = spinner(`Checking registry.`, {\n    silent: options.silent,\n  })?.start()\n  const tree = await resolveRegistryTree(components, configWithDefaults(config))\n\n  if (!tree) {\n    registrySpinner?.fail()\n    return handleError(new Error(\"Failed to fetch components from registry.\"))\n  }\n\n  try {\n    validateFilesTarget(tree.files ?? [], config.resolvedPaths.cwd)\n  } catch (error) {\n    registrySpinner?.fail()\n    return handleError(error)\n  }\n\n  registrySpinner?.succeed()\n\n  const filesCreated: string[] = []\n  const filesUpdated: string[] = []\n  const filesSkipped: string[] = []\n\n  const rootSpinner = spinner(`Installing components.`)?.start()\n\n  // Process global updates (tailwind, css vars, dependencies) first for the main target.\n  // These should typically go to the UI package in a workspace.\n  const mainTargetConfig = workspaceConfig.ui\n  const tailwindVersion = await getProjectTailwindVersionFromConfig(\n    mainTargetConfig\n  )\n  const workspaceRoot = findCommonRoot(\n    config.resolvedPaths.cwd,\n    mainTargetConfig.resolvedPaths.ui\n  )\n\n  // 1. Update tailwind config.\n  if (tree.tailwind?.config) {\n    await updateTailwindConfig(tree.tailwind?.config, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n    })\n    filesUpdated.push(\n      path.relative(\n        workspaceRoot,\n        mainTargetConfig.resolvedPaths.tailwindConfig\n      )\n    )\n  }\n\n  // 2. Update css vars.\n  if (tree.cssVars) {\n    const overwriteCssVars = await shouldOverwriteCssVars(components, config)\n    await updateCssVars(tree.cssVars, mainTargetConfig, {\n      silent: true,\n      tailwindVersion,\n      tailwindConfig: tree.tailwind?.config,\n      overwriteCssVars,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 3. Update CSS\n  if (tree.css) {\n    await updateCss(tree.css, mainTargetConfig, {\n      silent: true,\n    })\n    filesUpdated.push(\n      path.relative(workspaceRoot, mainTargetConfig.resolvedPaths.tailwindCss)\n    )\n  }\n\n  // 4. Update environment variables\n  if (tree.envVars) {\n    await updateEnvVars(tree.envVars, mainTargetConfig, {\n      silent: true,\n    })\n  }\n\n  // 5. Update dependencies.\n  await updateDependencies(\n    tree.dependencies,\n    tree.devDependencies,\n    mainTargetConfig,\n    {\n      silent: true,\n    }\n  )\n\n  // 6. Update fonts.\n  await updateFonts(tree.fonts, mainTargetConfig, {\n    silent: true,\n  })\n\n  // 7. Group files by their type to determine target config and update files.\n  const filesByType = new Map<string, typeof tree.files>()\n\n  for (const file of tree.files ?? []) {\n    const type = file.type || \"registry:ui\"\n    if (!filesByType.has(type)) {\n      filesByType.set(type, [])\n    }\n    filesByType.get(type)!.push(file)\n  }\n\n  // Process each type of component with its appropriate target config.\n  for (const type of Array.from(filesByType.keys())) {\n    const typeFiles = filesByType.get(type)!\n\n    let targetConfig = type === \"registry:ui\" ? workspaceConfig.ui : config\n\n    const typeWorkspaceRoot = findCommonRoot(\n      config.resolvedPaths.cwd,\n      targetConfig.resolvedPaths.ui || targetConfig.resolvedPaths.cwd\n    )\n    const packageRoot =\n      (await findPackageRoot(\n        typeWorkspaceRoot,\n        targetConfig.resolvedPaths.cwd\n      )) ?? targetConfig.resolvedPaths.cwd\n\n    // Update files for this type.\n    const files = await updateFiles(typeFiles, targetConfig, {\n      overwrite: options.overwrite,\n      silent: true,\n      rootSpinner,\n      isRemote: options.isRemote,\n      isWorkspace: true,\n      path: options.path,\n    })\n\n    filesCreated.push(\n      ...files.filesCreated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesUpdated.push(\n      ...files.filesUpdated.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n    filesSkipped.push(\n      ...files.filesSkipped.map((file) =>\n        path.relative(typeWorkspaceRoot, path.join(packageRoot, file))\n      )\n    )\n  }\n\n  rootSpinner?.succeed()\n\n  // Sort files.\n  filesCreated.sort()\n  filesUpdated.sort()\n  filesSkipped.sort()\n\n  const hasUpdatedFiles = filesCreated.length || filesUpdated.length\n  if (!hasUpdatedFiles && !filesSkipped.length) {\n    spinner(`No files updated.`, {\n      silent: options.silent,\n    })?.info()\n  }\n\n  if (filesCreated.length) {\n    spinner(\n      `Created ${filesCreated.length} ${\n        filesCreated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.succeed()\n    for (const file of filesCreated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesUpdated.length) {\n    spinner(\n      `Updated ${filesUpdated.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }:`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesUpdated) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (filesSkipped.length) {\n    spinner(\n      `Skipped ${filesSkipped.length} ${\n        filesUpdated.length === 1 ? \"file\" : \"files\"\n      }: (use --overwrite to overwrite)`,\n      {\n        silent: options.silent,\n      }\n    )?.info()\n    for (const file of filesSkipped) {\n      logger.log(`  - ${file}`)\n    }\n  }\n\n  if (tree.docs) {\n    logger.info(tree.docs)\n  }\n}\n\nasync function shouldOverwriteCssVars(\n  components: z.infer<typeof registryItemSchema>[\"name\"][],\n  config: z.infer<typeof configSchema>\n) {\n  const result = await getRegistryItems(components, { config })\n  const payload = z.array(registryItemSchema).parse(result)\n\n  return payload.some(\n    (component) =>\n      component.type === \"registry:theme\" ||\n      component.type === \"registry:style\" ||\n      component.type === \"registry:font\" ||\n      component.type === \"registry:base\"\n  )\n}\n\nfunction validateFilesTarget(\n  files: z.infer<typeof registryItemFileSchema>[],\n  cwd: string\n) {\n  for (const file of files) {\n    if (!file?.target) {\n      continue\n    }\n\n    if (!isSafeTarget(file.target, cwd)) {\n      throw new Error(\n        `We found an unsafe file path \"${file.target} in the registry item. Installation aborted.`\n      )\n    }\n  }\n}\n","import os from \"os\"\nimport path from \"path\"\nimport { initOptionsSchema } from \"@/src/commands/init\"\nimport { fetchRegistry } from \"@/src/registry/fetcher\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { execa } from \"execa\"\nimport fs from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nconst GITHUB_TEMPLATE_URL =\n  \"https://codeload.github.com/shadcn-ui/ui/tar.gz/main\"\n\nexport const TEMPLATES = {\n  next: \"next\",\n  \"next-monorepo\": \"next-monorepo\",\n  vite: \"vite\",\n  start: \"start\",\n} as const\n\nexport async function createProject(\n  options: Pick<\n    z.infer<typeof initOptionsSchema>,\n    \"cwd\" | \"name\" | \"force\" | \"srcDir\" | \"components\" | \"template\"\n  >\n) {\n  options = {\n    srcDir: false,\n    ...options,\n  }\n\n  let template: keyof typeof TEMPLATES =\n    options.template && TEMPLATES[options.template as keyof typeof TEMPLATES]\n      ? (options.template as keyof typeof TEMPLATES)\n      : \"next\"\n  let projectName: string =\n    options.name ??\n    (template === TEMPLATES.next ||\n    template === TEMPLATES.vite ||\n    template === TEMPLATES.start\n      ? \"my-app\"\n      : \"my-monorepo\")\n  let nextVersion = \"latest\"\n\n  const isRemoteComponent =\n    options.components?.length === 1 &&\n    !!options.components[0].match(/\\/chat\\/b\\//)\n\n  if (options.components && isRemoteComponent) {\n    try {\n      const [result] = await fetchRegistry(options.components)\n      const { meta } = z\n        .object({\n          meta: z.object({\n            nextVersion: z.string(),\n          }),\n        })\n        .parse(result)\n      nextVersion = meta.nextVersion\n\n      // Force template to next for remote components.\n      template = TEMPLATES.next\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  }\n\n  if (!options.force) {\n    const { type, name } = await prompts([\n      {\n        type: options.template || isRemoteComponent ? null : \"select\",\n        name: \"type\",\n        message: `The path ${highlighter.info(\n          options.cwd\n        )} does not contain a package.json file.\\n  Would you like to start a new project?`,\n        choices: [\n          { title: \"Next.js\", value: \"next\" },\n          { title: \"Next.js (Monorepo)\", value: \"next-monorepo\" },\n          { title: \"Vite\", value: \"vite\" },\n          { title: \"TanStack Start\", value: \"start\" },\n        ],\n        initial: 0,\n      },\n      {\n        type: options.name ? null : \"text\",\n        name: \"name\",\n        message: \"What is your project named?\",\n        initial: projectName,\n        format: (value: string) => value.trim(),\n        validate: (value: string) =>\n          value.length > 128\n            ? `Name should be less than 128 characters.`\n            : true,\n      },\n    ])\n\n    template = type ?? template\n    projectName = name ?? projectName\n  }\n\n  const packageManager = await getPackageManager(options.cwd, {\n    withFallback: true,\n  })\n\n  const projectPath = `${options.cwd}/${projectName}`\n\n  // Check if path is writable.\n  try {\n    await fs.access(options.cwd, fs.constants.W_OK)\n  } catch (error) {\n    logger.break()\n    logger.error(`The path ${highlighter.info(options.cwd)} is not writable.`)\n    logger.error(\n      `It is likely you do not have write permissions for this folder or the path ${highlighter.info(\n        options.cwd\n      )} does not exist.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n\n  if (fs.existsSync(path.resolve(options.cwd, projectName, \"package.json\"))) {\n    logger.break()\n    logger.error(\n      `A project with the name ${highlighter.info(projectName)} already exists.`\n    )\n    logger.error(`Please choose a different name and try again.`)\n    logger.break()\n    process.exit(1)\n  }\n\n  if (template === TEMPLATES.next) {\n    await createNextProject(projectPath, {\n      version: nextVersion,\n      cwd: options.cwd,\n      packageManager,\n      srcDir: !!options.srcDir,\n    })\n  }\n\n  if (template === TEMPLATES[\"next-monorepo\"]) {\n    await createMonorepoProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  if (template === TEMPLATES.vite) {\n    await createViteProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  if (template === TEMPLATES.start) {\n    await createStartProject(projectPath, {\n      packageManager,\n    })\n  }\n\n  return {\n    projectPath,\n    projectName,\n    template,\n  }\n}\n\nasync function createNextProject(\n  projectPath: string,\n  options: {\n    version: string\n    cwd: string\n    packageManager: string\n    srcDir: boolean\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js project. This may take a few minutes.`\n  ).start()\n\n  // Note: pnpm fails here. Fallback to npx with --use-PACKAGE-MANAGER.\n  const args = [\n    \"--tailwind\",\n    \"--eslint\",\n    \"--typescript\",\n    \"--app\",\n    options.srcDir ? \"--src-dir\" : \"--no-src-dir\",\n    \"--no-import-alias\",\n    `--use-${options.packageManager}`,\n  ]\n\n  if (\n    options.version.startsWith(\"15\") ||\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--turbopack\")\n  }\n\n  if (\n    options.version.startsWith(\"latest\") ||\n    options.version.startsWith(\"canary\")\n  ) {\n    args.push(\"--no-react-compiler\")\n  }\n\n  try {\n    await execa(\n      \"npx\",\n      [`create-next-app@${options.version}`, projectPath, \"--silent\", ...args],\n      {\n        cwd: options.cwd,\n      }\n    )\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `Something went wrong creating a new Next.js project. Please try again.`\n    )\n    process.exit(1)\n  }\n\n  createSpinner?.succeed(\"Creating a new Next.js project.\")\n}\n\nasync function createMonorepoProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Next.js monorepo. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/monorepo-next\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"monorepo-next\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n    // await execa(\"cd\", [cwd])\n\n    // Write project name to the package.json\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    const cwd = process.cwd()\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new Next.js monorepo.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Next.js monorepo.\")\n    handleError(error)\n  }\n}\n\nasync function createViteProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new Vite project. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file.\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/vite-app\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"vite-app\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Remove pnpm-lock.yaml if using a different package manager.\n    if (options.packageManager !== \"pnpm\") {\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\n      if (fs.existsSync(lockFilePath)) {\n        await fs.remove(lockFilePath)\n      }\n    }\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n\n    // Write project name to the package.json.\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new Vite project.\")\n  } catch (error) {\n    createSpinner?.fail(\"Something went wrong creating a new Vite project.\")\n    handleError(error)\n  }\n}\n\nasync function createStartProject(\n  projectPath: string,\n  options: {\n    packageManager: string\n  }\n) {\n  const createSpinner = spinner(\n    `Creating a new TanStack Start project. This may take a few minutes.`\n  ).start()\n\n  try {\n    // Get the template.\n    const templatePath = path.join(os.tmpdir(), `shadcn-template-${Date.now()}`)\n    await fs.ensureDir(templatePath)\n    const response = await fetch(GITHUB_TEMPLATE_URL)\n    if (!response.ok) {\n      throw new Error(`Failed to download template: ${response.statusText}`)\n    }\n\n    // Write the tar file.\n    const tarPath = path.resolve(templatePath, \"template.tar.gz\")\n    await fs.writeFile(tarPath, Buffer.from(await response.arrayBuffer()))\n    await execa(\"tar\", [\n      \"-xzf\",\n      tarPath,\n      \"-C\",\n      templatePath,\n      \"--strip-components=2\",\n      \"ui-main/templates/start-app\",\n    ])\n    const extractedPath = path.resolve(templatePath, \"start-app\")\n    await fs.move(extractedPath, projectPath)\n    await fs.remove(templatePath)\n\n    // Remove pnpm-lock.yaml if using a different package manager.\n    if (options.packageManager !== \"pnpm\") {\n      const lockFilePath = path.join(projectPath, \"pnpm-lock.yaml\")\n      if (fs.existsSync(lockFilePath)) {\n        await fs.remove(lockFilePath)\n      }\n    }\n\n    // Run install.\n    await execa(options.packageManager, [\"install\"], {\n      cwd: projectPath,\n    })\n\n    // Write project name to the package.json.\n    const packageJsonPath = path.join(projectPath, \"package.json\")\n    if (fs.existsSync(packageJsonPath)) {\n      const packageJsonContent = await fs.readFile(packageJsonPath, \"utf8\")\n      const packageJson = JSON.parse(packageJsonContent)\n      packageJson.name = projectPath.split(\"/\").pop()\n      await fs.writeFile(packageJsonPath, JSON.stringify(packageJson, null, 2))\n    }\n\n    // Try git init.\n    await execa(\"git\", [\"--version\"], { cwd: projectPath })\n    await execa(\"git\", [\"init\"], { cwd: projectPath })\n    await execa(\"git\", [\"add\", \"-A\"], { cwd: projectPath })\n    await execa(\"git\", [\"commit\", \"-m\", \"Initial commit\"], {\n      cwd: projectPath,\n    })\n\n    createSpinner?.succeed(\"Creating a new TanStack Start project.\")\n  } catch (error) {\n    createSpinner?.fail(\n      \"Something went wrong creating a new TanStack Start project.\"\n    )\n    handleError(error)\n  }\n}\n","import { existsSync } from \"fs\"\nimport { join } from \"path\"\nimport { logger } from \"@/src/utils/logger\"\n\nexport async function loadEnvFiles(cwd: string = process.cwd()): Promise<void> {\n  try {\n    const { config } = await import(\"@dotenvx/dotenvx\")\n    const envFiles = [\n      \".env.local\",\n      \".env.development.local\",\n      \".env.development\",\n      \".env\",\n    ]\n\n    for (const envFile of envFiles) {\n      const envPath = join(cwd, envFile)\n      if (existsSync(envPath)) {\n        config({\n          path: envPath,\n          overload: false,\n          quiet: true,\n        })\n      }\n    }\n  } catch (error) {\n    logger.warn(\"Failed to load env files:\", error)\n  }\n}\n","import fsExtra from \"fs-extra\"\n\nexport const FILE_BACKUP_SUFFIX = \".bak\"\n\nexport function createFileBackup(filePath: string): string | null {\n  if (!fsExtra.existsSync(filePath)) {\n    return null\n  }\n\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n  try {\n    fsExtra.renameSync(filePath, backupPath)\n    return backupPath\n  } catch (error) {\n    console.error(`Failed to create backup of ${filePath}: ${error}`)\n    return null\n  }\n}\n\nexport function restoreFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.renameSync(backupPath, filePath)\n    return true\n  } catch (error) {\n    console.error(\n      `Warning: Could not restore backup file ${backupPath}: ${error}`\n    )\n    return false\n  }\n}\n\nexport function deleteFileBackup(filePath: string): boolean {\n  const backupPath = `${filePath}${FILE_BACKUP_SUFFIX}`\n\n  if (!fsExtra.existsSync(backupPath)) {\n    return false\n  }\n\n  try {\n    fsExtra.unlinkSync(backupPath)\n    return true\n  } catch (error) {\n    // Best effort - don't log as this is just cleanup\n    return false\n  }\n}\n","import { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { RegistryNotConfiguredError } from \"@/src/registry/errors\"\nimport { parseRegistryAndItemFromString } from \"@/src/registry/parser\"\nimport { fetchRegistryItems } from \"@/src/registry/resolver\"\nimport { Config } from \"@/src/utils/get-config\"\n\n// Recursively discovers all registry namespaces including nested ones.\nexport async function resolveRegistryNamespaces(\n  components: string[],\n  config: Config\n) {\n  const discoveredNamespaces = new Set<string>()\n  const visitedItems = new Set<string>()\n  const itemsToProcess = [...components]\n\n  while (itemsToProcess.length > 0) {\n    const currentItem = itemsToProcess.shift()!\n\n    if (visitedItems.has(currentItem)) {\n      continue\n    }\n    visitedItems.add(currentItem)\n\n    const { registry } = parseRegistryAndItemFromString(currentItem)\n    if (registry && !BUILTIN_REGISTRIES[registry]) {\n      discoveredNamespaces.add(registry)\n    }\n\n    try {\n      const [item] = await fetchRegistryItems([currentItem], config, {\n        useCache: true,\n      })\n\n      if (item?.registryDependencies) {\n        for (const dep of item.registryDependencies) {\n          const { registry: depRegistry } = parseRegistryAndItemFromString(dep)\n          if (depRegistry && !BUILTIN_REGISTRIES[depRegistry]) {\n            discoveredNamespaces.add(depRegistry)\n          }\n\n          if (!visitedItems.has(dep)) {\n            itemsToProcess.push(dep)\n          }\n        }\n      }\n    } catch (error) {\n      // If a registry is not configured, we still track it.\n      if (error instanceof RegistryNotConfiguredError) {\n        const { registry } = parseRegistryAndItemFromString(currentItem)\n        if (registry && !BUILTIN_REGISTRIES[registry]) {\n          discoveredNamespaces.add(registry)\n        }\n        continue\n      }\n\n      // For other errors (network, parsing, etc.), we skip this item\n      // but continue processing others to discover as many namespaces as possible.\n      continue\n    }\n  }\n\n  return Array.from(discoveredNamespaces)\n}\n","import path from \"path\"\nimport { getRegistriesIndex } from \"@/src/registry/api\"\nimport { BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { resolveRegistryNamespaces } from \"@/src/registry/namespaces\"\nimport { rawConfigSchema } from \"@/src/registry/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport fs from \"fs-extra\"\n\nexport async function ensureRegistriesInConfig(\n  components: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n    writeFile?: boolean\n  } = {}\n) {\n  options = {\n    silent: false,\n    writeFile: true,\n    ...options,\n  }\n\n  // Use resolveRegistryNamespaces to discover all namespaces including dependencies.\n  const registryNames = await resolveRegistryNamespaces(components, config)\n\n  const missingRegistries = registryNames.filter(\n    (registry) =>\n      !config.registries?.[registry] &&\n      !Object.keys(BUILTIN_REGISTRIES).includes(registry)\n  )\n\n  if (missingRegistries.length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // We'll fail silently if we can't fetch the registry index.\n  // The error handling by caller will guide user to add the missing registries.\n  const registryIndex = await getRegistriesIndex({\n    useCache: process.env.NODE_ENV !== \"development\",\n  })\n\n  if (!registryIndex) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  const foundRegistries: Record<string, string> = {}\n  for (const registry of missingRegistries) {\n    if (registryIndex[registry]) {\n      foundRegistries[registry] = registryIndex[registry]\n    }\n  }\n\n  if (Object.keys(foundRegistries).length === 0) {\n    return {\n      config,\n      newRegistries: [],\n    }\n  }\n\n  // Filter out built-in registries from existing config before merging\n  const existingRegistries = Object.fromEntries(\n    Object.entries(config.registries || {}).filter(\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\n    )\n  )\n\n  const newConfigWithRegistries = {\n    ...config,\n    registries: {\n      ...existingRegistries,\n      ...foundRegistries,\n    },\n  }\n\n  if (options.writeFile) {\n    const { resolvedPaths, ...configWithoutResolvedPaths } =\n      newConfigWithRegistries\n    const configSpinner = spinner(\"Updating components.json.\", {\n      silent: options.silent,\n    }).start()\n    const updatedConfig = rawConfigSchema.parse(configWithoutResolvedPaths)\n    await fs.writeFile(\n      path.resolve(config.resolvedPaths.cwd, \"components.json\"),\n      JSON.stringify(updatedConfig, null, 2) + \"\\n\",\n      \"utf-8\"\n    )\n    configSpinner.succeed()\n  }\n\n  return {\n    config: newConfigWithRegistries,\n    newRegistries: Object.keys(foundRegistries),\n  }\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport {\n  _createSourceFile,\n  _getQuoteChar,\n} from \"@/src/utils/updaters/update-tailwind-config\"\nimport { ObjectLiteralExpression, SyntaxKind } from \"ts-morph\"\n\nexport async function updateTailwindContent(\n  content: string[],\n  config: Config,\n  options: {\n    silent?: boolean\n  }\n) {\n  if (!content) {\n    return\n  }\n\n  options = {\n    silent: false,\n    ...options,\n  }\n\n  const tailwindFileRelativePath = path.relative(\n    config.resolvedPaths.cwd,\n    config.resolvedPaths.tailwindConfig\n  )\n  const tailwindSpinner = spinner(\n    `Updating ${highlighter.info(tailwindFileRelativePath)}`,\n    {\n      silent: options.silent,\n    }\n  ).start()\n  const raw = await fs.readFile(config.resolvedPaths.tailwindConfig, \"utf8\")\n  const output = await transformTailwindContent(raw, content, config)\n  await fs.writeFile(config.resolvedPaths.tailwindConfig, output, \"utf8\")\n  tailwindSpinner?.succeed()\n}\n\nexport async function transformTailwindContent(\n  input: string,\n  content: string[],\n  config: Config\n) {\n  const sourceFile = await _createSourceFile(input, config)\n  // Find the object with content property.\n  // This is faster than traversing the default export.\n  // TODO: maybe we do need to traverse the default export?\n  const configObject = sourceFile\n    .getDescendantsOfKind(SyntaxKind.ObjectLiteralExpression)\n    .find((node) =>\n      node\n        .getProperties()\n        .some(\n          (property) =>\n            property.isKind(SyntaxKind.PropertyAssignment) &&\n            property.getName() === \"content\"\n        )\n    )\n\n  // We couldn't find the config object, so we return the input as is.\n  if (!configObject) {\n    return input\n  }\n\n  addTailwindConfigContent(configObject, content)\n\n  return sourceFile.getFullText()\n}\n\nasync function addTailwindConfigContent(\n  configObject: ObjectLiteralExpression,\n  content: string[]\n) {\n  const quoteChar = _getQuoteChar(configObject)\n\n  const existingProperty = configObject.getProperty(\"content\")\n\n  if (!existingProperty) {\n    const newProperty = {\n      name: \"content\",\n      initializer: `[${quoteChar}${content.join(\n        `${quoteChar}, ${quoteChar}`\n      )}${quoteChar}]`,\n    }\n    configObject.addPropertyAssignment(newProperty)\n\n    return configObject\n  }\n\n  if (existingProperty.isKind(SyntaxKind.PropertyAssignment)) {\n    const initializer = existingProperty.getInitializer()\n\n    // If property is an array, append.\n    if (initializer?.isKind(SyntaxKind.ArrayLiteralExpression)) {\n      for (const contentItem of content) {\n        const newValue = `${quoteChar}${contentItem}${quoteChar}`\n\n        // Check if the array already contains the value.\n        if (\n          initializer\n            .getElements()\n            .map((element) => element.getText())\n            .includes(newValue)\n        ) {\n          continue\n        }\n\n        initializer.addElement(newValue)\n      }\n    }\n\n    return configObject\n  }\n\n  return configObject\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { preFlightInit } from \"@/src/preflights/preflight-init\"\nimport {\n  getRegistryBaseColors,\n  getRegistryItems,\n  getRegistryStyles,\n} from \"@/src/registry/api\"\nimport { buildUrlAndHeadersForRegistryItem } from \"@/src/registry/builder\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { BASE_COLORS, BUILTIN_REGISTRIES } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { TEMPLATES, createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport {\n  FILE_BACKUP_SUFFIX,\n  createFileBackup,\n  deleteFileBackup,\n  restoreFileBackup,\n} from \"@/src/utils/file-helper\"\nimport {\n  DEFAULT_COMPONENTS,\n  DEFAULT_TAILWIND_CONFIG,\n  DEFAULT_TAILWIND_CSS,\n  DEFAULT_UTILS,\n  createConfig,\n  getConfig,\n  resolveConfigPaths,\n  type Config,\n} from \"@/src/utils/get-config\"\nimport {\n  getProjectConfig,\n  getProjectInfo,\n  getProjectTailwindVersionFromConfig,\n} from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateTailwindContent } from \"@/src/utils/updaters/update-tailwind-content\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nprocess.on(\"exit\", (code) => {\n  const filePath = path.resolve(process.cwd(), \"components.json\")\n\n  // Delete backup if successful.\n  if (code === 0) {\n    return deleteFileBackup(filePath)\n  }\n\n  // Restore backup if error.\n  return restoreFileBackup(filePath)\n})\n\nexport const initOptionsSchema = z.object({\n  cwd: z.string(),\n  name: z.string().optional(),\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  defaults: z.boolean(),\n  force: z.boolean(),\n  silent: z.boolean(),\n  isNewProject: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n  template: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return TEMPLATES[val as keyof typeof TEMPLATES]\n        }\n        return true\n      },\n      {\n        message:\n          \"Invalid template. Please use 'next', 'vite', 'start' or 'next-monorepo'.\",\n      }\n    ),\n  baseColor: z\n    .string()\n    .optional()\n    .refine(\n      (val) => {\n        if (val) {\n          return BASE_COLORS.find((color) => color.name === val)\n        }\n\n        return true\n      },\n      {\n        message: `Invalid base color. Please use '${BASE_COLORS.map(\n          (color) => color.name\n        ).join(\"', '\")}'`,\n      }\n    ),\n  baseStyle: z.boolean(),\n  // Config from registry:base item to merge into components.json.\n  registryBaseConfig: rawConfigSchema.deepPartial().optional(),\n})\n\nexport const init = new Command()\n  .name(\"init\")\n  .description(\"initialize your project and install dependencies\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. (next, start, vite, next-monorepo)\"\n  )\n  .option(\n    \"-b, --base-color <base-color>\",\n    \"the base color to use. (neutral, gray, zinc, stone, slate)\",\n    undefined\n  )\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", true)\n  .option(\"-d, --defaults,\", \"use default configuration.\", false)\n  .option(\"-f, --force\", \"force overwrite of existing configuration.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .option(\"--no-base-style\", \"do not install the base shadcn style.\")\n  .action(async (components, opts) => {\n    try {\n      // Apply defaults when --defaults flag is set.\n      if (opts.defaults) {\n        opts.template = opts.template || \"next\"\n        opts.baseColor = opts.baseColor || \"neutral\"\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        isNewProject: false,\n        components,\n        ...opts,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // We need to check if we're initializing with a new style.\n      // This will allow us to determine if we need to install the base style.\n      // And if we should prompt the user for a base color.\n      if (components.length > 0) {\n        // We don't know the full config at this point.\n        // So we'll use a shadow config to fetch the first item.\n        let shadowConfig = configWithDefaults(\n          createConfig({\n            resolvedPaths: {\n              cwd: options.cwd,\n            },\n          })\n        )\n\n        // Check if there's a components.json file.\n        // If so, we'll merge with our shadow config.\n        const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n        if (fsExtra.existsSync(componentsJsonPath)) {\n          const existingConfig = await fsExtra.readJson(componentsJsonPath)\n          const config = rawConfigSchema.partial().parse(existingConfig)\n          const baseConfig = createConfig({\n            resolvedPaths: {\n              cwd: options.cwd,\n            },\n          })\n          shadowConfig = configWithDefaults({\n            ...config,\n            resolvedPaths: {\n              ...baseConfig.resolvedPaths,\n              cwd: options.cwd,\n            },\n          })\n\n          // Since components.json might not be valid at this point.\n          // Temporarily rename components.json to allow preflight to run.\n          // We'll rename it back after preflight.\n          createFileBackup(componentsJsonPath)\n        }\n\n        // Ensure all registries used in components are configured.\n        const { config: updatedConfig } = await ensureRegistriesInConfig(\n          components,\n          shadowConfig,\n          {\n            silent: true,\n            writeFile: false,\n          }\n        )\n        shadowConfig = updatedConfig\n\n        // This forces a shadowConfig validation early in the process.\n        buildUrlAndHeadersForRegistryItem(components[0], shadowConfig)\n\n        const [item] = await getRegistryItems([components[0]], {\n          config: shadowConfig,\n        })\n\n        // Set options from registry:base.\n        if (item?.type === \"registry:base\") {\n          if (item.config) {\n            // Merge config values into shadowConfig.\n            shadowConfig = configWithDefaults(\n              deepmerge(shadowConfig, item.config)\n            )\n            // Store config to be merged into components.json later.\n            options.registryBaseConfig = item.config\n          }\n          options.baseStyle =\n            item.extends === \"none\" ? false : options.baseStyle\n        }\n\n        if (item?.type === \"registry:style\") {\n          // Set a default base color so we're not prompted.\n          // The style will extend or override it.\n          options.baseColor = \"neutral\"\n\n          // If the style extends none, we don't want to install the base style.\n          options.baseStyle =\n            item.extends === \"none\" ? false : options.baseStyle\n        }\n      }\n\n      // If --no-base-style, we don't want to prompt for a base color either.\n      // The style will extend or override it.\n      if (!options.baseStyle) {\n        options.baseColor = \"neutral\"\n      }\n\n      await runInit(options)\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed.\\nYou may now add components.`\n      )\n\n      // We need when running with custom cwd.\n      deleteFileBackup(path.resolve(options.cwd, \"components.json\"))\n      logger.break()\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nexport async function runInit(\n  options: z.infer<typeof initOptionsSchema> & {\n    skipPreflight?: boolean\n  }\n) {\n  let projectInfo\n  let newProjectTemplate\n  if (!options.skipPreflight) {\n    const preflight = await preFlightInit(options)\n    if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n      const { projectPath, template } = await createProject(options)\n      if (!projectPath) {\n        process.exit(1)\n      }\n      options.cwd = projectPath\n      options.isNewProject = true\n      newProjectTemplate = template\n      // Re-get project info for the newly created project.\n      projectInfo = await getProjectInfo(options.cwd)\n    } else {\n      projectInfo = preflight.projectInfo\n    }\n  } else {\n    projectInfo = await getProjectInfo(options.cwd)\n  }\n\n  if (newProjectTemplate === \"next-monorepo\") {\n    options.cwd = path.resolve(options.cwd, \"apps/web\")\n    return await getConfig(options.cwd)\n  }\n\n  const projectConfig = await getProjectConfig(options.cwd, projectInfo)\n\n  let config = projectConfig\n    ? await promptForMinimalConfig(projectConfig, options)\n    : await promptForConfig(await getConfig(options.cwd))\n\n  if (!options.yes) {\n    const { proceed } = await prompts({\n      type: \"confirm\",\n      name: \"proceed\",\n      message: `Write configuration to ${highlighter.info(\n        \"components.json\"\n      )}. Proceed?`,\n      initial: true,\n    })\n\n    if (!proceed) {\n      process.exit(0)\n    }\n  }\n\n  // Prepare the list of components to be added.\n  const components = [\n    // \"index\" is the default shadcn style.\n    // Why index? Because when style is true, we read style from components.json and fetch that.\n    // i.e new-york from components.json then fetch /styles/new-york/index.\n    // TODO: Fix this so that we can extend any style i.e --style=new-york.\n    ...(options.baseStyle ? [\"index\"] : []),\n    ...(options.components ?? []),\n  ]\n\n  // Ensure registries are configured for the components we're about to add.\n  const fullConfigForRegistry = await resolveConfigPaths(options.cwd, config)\n  const { config: configWithRegistries } = await ensureRegistriesInConfig(\n    components,\n    fullConfigForRegistry,\n    {\n      silent: true,\n    }\n  )\n\n  // Update config with any new registries found.\n  if (configWithRegistries.registries) {\n    config.registries = configWithRegistries.registries\n  }\n\n  const componentSpinner = spinner(`Writing components.json.`).start()\n  const targetPath = path.resolve(options.cwd, \"components.json\")\n  const backupPath = `${targetPath}${FILE_BACKUP_SUFFIX}`\n\n  // Merge and keep registries at the end.\n  const mergeConfig = (base: typeof config, override: object) => {\n    const { registries, ...merged } = deepmerge(base, override)\n    return { ...merged, registries } as typeof config\n  }\n\n  // Merge with backup config if it exists and not using --force.\n  if (!options.force && fsExtra.existsSync(backupPath)) {\n    const existingConfig = await fsExtra.readJson(backupPath)\n    config = mergeConfig(existingConfig, config)\n  }\n\n  // Merge config from registry:base item.\n  if (options.registryBaseConfig) {\n    config = mergeConfig(config, options.registryBaseConfig)\n  }\n\n  // Make sure to filter out built-in registries.\n  // TODO: fix this in ensureRegistriesInConfig.\n  config.registries = Object.fromEntries(\n    Object.entries(config.registries || {}).filter(\n      ([key]) => !Object.keys(BUILTIN_REGISTRIES).includes(key)\n    )\n  )\n\n  // Write components.json.\n  await fs.writeFile(targetPath, `${JSON.stringify(config, null, 2)}\\n`, \"utf8\")\n  componentSpinner.succeed()\n\n  // Add components.\n  const fullConfig = await resolveConfigPaths(options.cwd, config)\n  await addComponents(components, fullConfig, {\n    // Init will always overwrite files.\n    overwrite: true,\n    silent: options.silent,\n    baseStyle: options.baseStyle,\n    isNewProject:\n      options.isNewProject || projectInfo?.framework.name === \"next-app\",\n  })\n\n  // If a new project is using src dir, let's update the tailwind content config.\n  // TODO: Handle this per framework.\n  if (options.isNewProject && options.srcDir) {\n    await updateTailwindContent(\n      [\"./src/**/*.{js,ts,jsx,tsx,mdx}\"],\n      fullConfig,\n      {\n        silent: options.silent,\n      }\n    )\n  }\n\n  return fullConfig\n}\n\nasync function promptForConfig(defaultConfig: Config | null = null) {\n  const [styles, baseColors] = await Promise.all([\n    getRegistryStyles(),\n    getRegistryBaseColors(),\n  ])\n\n  logger.info(\"\")\n  const options = await prompts([\n    {\n      type: \"toggle\",\n      name: \"typescript\",\n      message: `Would you like to use ${highlighter.info(\n        \"TypeScript\"\n      )} (recommended)?`,\n      initial: defaultConfig?.tsx ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"select\",\n      name: \"style\",\n      message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n      choices: styles.map((style) => ({\n        title: style.label,\n        value: style.name,\n      })),\n    },\n    {\n      type: \"select\",\n      name: \"tailwindBaseColor\",\n      message: `Which color would you like to use as the ${highlighter.info(\n        \"base color\"\n      )}?`,\n      choices: baseColors.map((color) => ({\n        title: color.label,\n        value: color.name,\n      })),\n    },\n    {\n      type: \"text\",\n      name: \"tailwindCss\",\n      message: `Where is your ${highlighter.info(\"global CSS\")} file?`,\n      initial: defaultConfig?.tailwind.css ?? DEFAULT_TAILWIND_CSS,\n    },\n    {\n      type: \"toggle\",\n      name: \"tailwindCssVariables\",\n      message: `Would you like to use ${highlighter.info(\n        \"CSS variables\"\n      )} for theming?`,\n      initial: defaultConfig?.tailwind.cssVariables ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindPrefix\",\n      message: `Are you using a custom ${highlighter.info(\n        \"tailwind prefix eg. tw-\"\n      )}? (Leave blank if not)`,\n      initial: \"\",\n    },\n    {\n      type: \"text\",\n      name: \"tailwindConfig\",\n      message: `Where is your ${highlighter.info(\n        \"tailwind.config.js\"\n      )} located?`,\n      initial: defaultConfig?.tailwind.config ?? DEFAULT_TAILWIND_CONFIG,\n    },\n    {\n      type: \"text\",\n      name: \"components\",\n      message: `Configure the import alias for ${highlighter.info(\n        \"components\"\n      )}:`,\n      initial: defaultConfig?.aliases[\"components\"] ?? DEFAULT_COMPONENTS,\n    },\n    {\n      type: \"text\",\n      name: \"utils\",\n      message: `Configure the import alias for ${highlighter.info(\"utils\")}:`,\n      initial: defaultConfig?.aliases[\"utils\"] ?? DEFAULT_UTILS,\n    },\n    {\n      type: \"toggle\",\n      name: \"rsc\",\n      message: `Are you using ${highlighter.info(\"React Server Components\")}?`,\n      initial: defaultConfig?.rsc ?? true,\n      active: \"yes\",\n      inactive: \"no\",\n    },\n  ])\n\n  return rawConfigSchema.parse({\n    $schema: \"https://ui.shadcn.com/schema.json\",\n    style: options.style,\n    tailwind: {\n      config: options.tailwindConfig,\n      css: options.tailwindCss,\n      baseColor: options.tailwindBaseColor,\n      cssVariables: options.tailwindCssVariables,\n      prefix: options.tailwindPrefix,\n    },\n    rsc: options.rsc,\n    tsx: options.typescript,\n    aliases: {\n      utils: options.utils,\n      components: options.components,\n      // TODO: fix this.\n      lib: options.components.replace(/\\/components$/, \"lib\"),\n      hooks: options.components.replace(/\\/components$/, \"hooks\"),\n    },\n  })\n}\n\nasync function promptForMinimalConfig(\n  defaultConfig: Config,\n  opts: z.infer<typeof initOptionsSchema>\n) {\n  let style = defaultConfig.style\n  let baseColor = opts.baseColor\n  let cssVariables = defaultConfig.tailwind.cssVariables\n  let iconLibrary = defaultConfig.iconLibrary ?? \"lucide\"\n\n  if (!opts.defaults) {\n    const [styles, baseColors, tailwindVersion] = await Promise.all([\n      getRegistryStyles(),\n      getRegistryBaseColors(),\n      getProjectTailwindVersionFromConfig(defaultConfig),\n    ])\n\n    const options = await prompts([\n      {\n        // Skip style prompt if using Tailwind v4 or style is already set in config.\n        type: tailwindVersion === \"v4\" || style ? null : \"select\",\n        name: \"style\",\n        message: `Which ${highlighter.info(\"style\")} would you like to use?`,\n        choices: styles.map((style) => ({\n          title:\n            style.name === \"new-york\" ? \"New York (Recommended)\" : style.label,\n          value: style.name,\n        })),\n        initial: 0,\n      },\n      {\n        type: opts.baseColor ? null : \"select\",\n        name: \"tailwindBaseColor\",\n        message: `Which color would you like to use as the ${highlighter.info(\n          \"base color\"\n        )}?`,\n        choices: baseColors.map((color) => ({\n          title: color.label,\n          value: color.name,\n        })),\n      },\n    ])\n\n    style = options.style ?? style ?? \"new-york\"\n    baseColor = options.tailwindBaseColor ?? baseColor\n    cssVariables = opts.cssVariables\n  }\n\n  return rawConfigSchema.parse({\n    $schema: defaultConfig?.$schema,\n    style,\n    tailwind: {\n      ...defaultConfig?.tailwind,\n      baseColor,\n      cssVariables,\n    },\n    rsc: defaultConfig?.rsc,\n    tsx: defaultConfig?.tsx,\n    iconLibrary,\n    aliases: defaultConfig?.aliases,\n  })\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightAdd(options: z.infer<typeof addOptionsSchema>) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can add components, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import fs from \"fs/promises\"\nimport path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { Config } from \"@/src/utils/get-config\"\n\nexport async function updateAppIndex(component: string, config: Config) {\n  const indexPath = path.join(config.resolvedPaths.cwd, \"app/page.tsx\")\n\n  if (!(await fs.stat(indexPath)).isFile()) {\n    return\n  }\n\n  const [registryItem] = await getRegistryItems([component], { config })\n  if (\n    !registryItem?.meta?.importSpecifier ||\n    !registryItem?.meta?.moduleSpecifier\n  ) {\n    return\n  }\n\n  // Overwrite the index file with the new import.\n  const content = `import { ${registryItem?.meta?.importSpecifier} } from \"${registryItem.meta.moduleSpecifier}\"\\n\\nexport default function Page() {\\n  return <${registryItem?.meta?.importSpecifier} />\\n}`\n  await fs.writeFile(indexPath, content, \"utf8\")\n}\n","import path from \"path\"\nimport { runInit } from \"@/src/commands/init\"\nimport { preFlightAdd } from \"@/src/preflights/preflight-add\"\nimport { getRegistryItems, getShadcnRegistryIndex } from \"@/src/registry/api\"\nimport { DEPRECATED_COMPONENTS } from \"@/src/registry/constants\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { registryItemTypeSchema } from \"@/src/registry/schema\"\nimport { isUniversalRegistryItem } from \"@/src/registry/utils\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { createProject } from \"@/src/utils/create-project\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { updateAppIndex } from \"@/src/utils/update-app-index\"\nimport { Command } from \"commander\"\nimport prompts from \"prompts\"\nimport { z } from \"zod\"\n\nexport const addOptionsSchema = z.object({\n  components: z.array(z.string()).optional(),\n  yes: z.boolean(),\n  overwrite: z.boolean(),\n  cwd: z.string(),\n  all: z.boolean(),\n  path: z.string().optional(),\n  silent: z.boolean(),\n  srcDir: z.boolean().optional(),\n  cssVariables: z.boolean(),\n})\n\nexport const add = new Command()\n  .name(\"add\")\n  .description(\"add a component to your project\")\n  .argument(\"[components...]\", \"names, url or local path to component\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\"-o, --overwrite\", \"overwrite existing files.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-a, --all\", \"add all available components\", false)\n  .option(\"-p, --path <path>\", \"the path to add the component to.\")\n  .option(\"-s, --silent\", \"mute output.\", false)\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"--css-variables\", \"use css variables for theming.\", true)\n  .option(\"--no-css-variables\", \"do not use css variables for theming.\")\n  .action(async (components, opts) => {\n    try {\n      const options = addOptionsSchema.parse({\n        components,\n        cwd: path.resolve(opts.cwd),\n        ...opts,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      let initialConfig = await getConfig(options.cwd)\n      if (!initialConfig) {\n        initialConfig = createConfig({\n          style: \"new-york\",\n          resolvedPaths: {\n            cwd: options.cwd,\n          },\n        })\n      }\n\n      // Check for restricted component prefixes with base- or radix- styles.\n      const restrictedComponentPrefixes = [\n        \"sidebar-\",\n        \"login-\",\n        \"signup-\",\n        \"otp-\",\n        \"calendar-\",\n      ]\n      const restrictedStylePrefixes = [\"base-\", \"radix-\"]\n\n      if (components.length > 0) {\n        if (initialConfig?.style) {\n          const isRestrictedStyle = restrictedStylePrefixes.some((prefix) =>\n            initialConfig?.style.startsWith(prefix)\n          )\n\n          if (isRestrictedStyle) {\n            const restrictedComponents = components.filter(\n              (component: string) =>\n                restrictedComponentPrefixes.some((prefix) =>\n                  component.startsWith(prefix)\n                )\n            )\n\n            if (restrictedComponents.length) {\n              logger.warn(\n                `The ${highlighter.info(\n                  restrictedComponents\n                    .map((component: string) => component)\n                    .join(\", \")\n                )} component(s) are not available for the ${highlighter.info(\n                  initialConfig.style\n                )} style yet. They are coming soon.`\n              )\n              logger.warn(\n                \"In the meantime, you can visit the blocks page on https://ui.shadcn.com/blocks and copy the code.\"\n              )\n              logger.break()\n              process.exit(1)\n            }\n          }\n        }\n      }\n\n      let hasNewRegistries = false\n      if (components.length > 0) {\n        const { config: updatedConfig, newRegistries } =\n          await ensureRegistriesInConfig(components, initialConfig, {\n            silent: options.silent,\n            writeFile: false,\n          })\n        initialConfig = updatedConfig\n        hasNewRegistries = newRegistries.length > 0\n      }\n\n      let itemType: z.infer<typeof registryItemTypeSchema> | undefined\n      let shouldInstallBaseStyle = true\n      if (components.length > 0) {\n        const [registryItem] = await getRegistryItems([components[0]], {\n          config: initialConfig,\n        })\n        itemType = registryItem?.type\n        shouldInstallBaseStyle =\n          itemType !== \"registry:theme\" && itemType !== \"registry:style\"\n\n        if (isUniversalRegistryItem(registryItem)) {\n          await addComponents(components, initialConfig, {\n            ...options,\n            baseStyle: shouldInstallBaseStyle,\n          })\n          return\n        }\n\n        if (\n          !options.yes &&\n          (itemType === \"registry:style\" || itemType === \"registry:theme\")\n        ) {\n          logger.break()\n          const { confirm } = await prompts({\n            type: \"confirm\",\n            name: \"confirm\",\n            message: highlighter.warn(\n              `You are about to install a new ${itemType.replace(\n                \"registry:\",\n                \"\"\n              )}. \\nExisting CSS variables and components will be overwritten. Continue?`\n            ),\n          })\n          if (!confirm) {\n            logger.break()\n            logger.log(`Installation cancelled.`)\n            logger.break()\n            process.exit(1)\n          }\n        }\n      }\n\n      if (!options.components?.length) {\n        options.components = await promptForRegistryComponents(options)\n      }\n\n      const projectInfo = await getProjectInfo(options.cwd)\n      if (projectInfo?.tailwindVersion === \"v4\") {\n        const deprecatedComponents = DEPRECATED_COMPONENTS.filter((component) =>\n          options.components?.includes(component.name)\n        )\n\n        if (deprecatedComponents?.length) {\n          logger.break()\n          deprecatedComponents.forEach((component) => {\n            logger.warn(highlighter.warn(component.message))\n          })\n          logger.break()\n          process.exit(1)\n        }\n      }\n\n      let { errors, config } = await preFlightAdd(options)\n\n      // No components.json file. Prompt the user to run init.\n      let initHasRun = false\n      if (errors[ERRORS.MISSING_CONFIG]) {\n        const { proceed } = await prompts({\n          type: \"confirm\",\n          name: \"proceed\",\n          message: `You need to create a ${highlighter.info(\n            \"components.json\"\n          )} file to add components. Proceed?`,\n          initial: true,\n        })\n\n        if (!proceed) {\n          logger.break()\n          process.exit(1)\n        }\n\n        config = await runInit({\n          cwd: options.cwd,\n          yes: true,\n          force: true,\n          defaults: false,\n          skipPreflight: false,\n          silent: options.silent && !hasNewRegistries,\n          isNewProject: false,\n          srcDir: options.srcDir,\n          cssVariables: options.cssVariables,\n          baseStyle: shouldInstallBaseStyle,\n          baseColor: shouldInstallBaseStyle ? undefined : \"neutral\",\n          components: options.components,\n        })\n        initHasRun = true\n      }\n\n      let shouldUpdateAppIndex = false\n\n      if (errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\n        const { projectPath, template } = await createProject({\n          cwd: options.cwd,\n          force: options.overwrite,\n          srcDir: options.srcDir,\n          components: options.components,\n        })\n        if (!projectPath) {\n          logger.break()\n          process.exit(1)\n        }\n        options.cwd = projectPath\n\n        if (template === \"next-monorepo\") {\n          options.cwd = path.resolve(options.cwd, \"apps/web\")\n          config = await getConfig(options.cwd)\n        } else {\n          config = await runInit({\n            cwd: options.cwd,\n            yes: true,\n            force: true,\n            defaults: false,\n            skipPreflight: true,\n            silent: !hasNewRegistries && options.silent,\n            isNewProject: true,\n            srcDir: options.srcDir,\n            cssVariables: options.cssVariables,\n            baseStyle: shouldInstallBaseStyle,\n            baseColor: shouldInstallBaseStyle ? undefined : \"neutral\",\n            components: options.components,\n          })\n          initHasRun = true\n\n          shouldUpdateAppIndex =\n            options.components?.length === 1 &&\n            !!options.components[0].match(/\\/chat\\/b\\//)\n        }\n      }\n\n      if (!config) {\n        throw new Error(\n          `Failed to read config at ${highlighter.info(options.cwd)}.`\n        )\n      }\n\n      const { config: updatedConfig } = await ensureRegistriesInConfig(\n        options.components,\n        config,\n        {\n          silent: options.silent || hasNewRegistries,\n        }\n      )\n      config = updatedConfig\n\n      if (!initHasRun) {\n        await addComponents(options.components, config, {\n          ...options,\n          baseStyle: shouldInstallBaseStyle,\n        })\n      }\n\n      // If we're adding a single component and it's from the v0 registry,\n      // let's update the app/page.tsx file to import the component.\n      if (shouldUpdateAppIndex) {\n        await updateAppIndex(options.components[0], config)\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nasync function promptForRegistryComponents(\n  options: z.infer<typeof addOptionsSchema>\n) {\n  const registryIndex = await getShadcnRegistryIndex()\n  if (!registryIndex) {\n    logger.break()\n    handleError(new Error(\"Failed to fetch registry index.\"))\n    return []\n  }\n\n  if (options.all) {\n    return registryIndex\n      .map((entry) => entry.name)\n      .filter(\n        (component) => !DEPRECATED_COMPONENTS.some((c) => c.name === component)\n      )\n  }\n\n  if (options.components?.length) {\n    return options.components\n  }\n\n  const { components } = await prompts({\n    type: \"multiselect\",\n    name: \"components\",\n    message: \"Which components would you like to add?\",\n    hint: \"Space to select. A to toggle all. Enter to submit.\",\n    instructions: false,\n    choices: registryIndex\n      .filter(\n        (entry) =>\n          entry.type === \"registry:ui\" &&\n          !DEPRECATED_COMPONENTS.some(\n            (component) => component.name === entry.name\n          )\n      )\n      .map((entry) => ({\n        title: entry.name,\n        value: entry.name,\n        selected: options.all ? true : options.components?.includes(entry.name),\n      })),\n  })\n\n  if (!components?.length) {\n    logger.warn(\"No components selected. Exiting.\")\n    logger.info(\"\")\n    process.exit(1)\n  }\n\n  const result = z.array(z.string()).safeParse(components)\n  if (!result.success) {\n    logger.error(\"\")\n    handleError(new Error(\"Something went wrong. Please try again.\"))\n    return []\n  }\n  return result.data\n}\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  if (Object.keys(errors).length > 0) {\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE]) {\n      logger.break()\n      logger.error(\n        `The path ${highlighter.info(\n          resolvePaths.registryFile\n        )} does not exist.`\n      )\n    }\n\n    logger.break()\n    process.exit(1)\n  }\n\n  return {\n    errors,\n    resolvePaths,\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightBuild } from \"@/src/preflights/preflight-build\"\nimport { registryItemSchema, registrySchema } from \"@/src/schema\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n})\n\nexport const build = new Command()\n  .name(\"build\")\n  .description(\"build components for a shadcn registry\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (registry: string, opts) => {\n    try {\n      const options = buildOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        registryFile: registry,\n        outputDir: opts.output,\n      })\n\n      const { resolvePaths } = await preFlightBuild(options)\n      const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n\n      const result = registrySchema.safeParse(JSON.parse(content))\n\n      if (!result.success) {\n        logger.error(\n          `Invalid registry file found at ${highlighter.info(\n            resolvePaths.registryFile\n          )}.`\n        )\n        process.exit(1)\n      }\n\n      const buildSpinner = spinner(\"Building registry...\")\n      for (const registryItem of result.data.items) {\n        buildSpinner.start(`Building ${registryItem.name}...`)\n\n        // Add the schema to the registry item.\n        registryItem[\"$schema\"] =\n          \"https://ui.shadcn.com/schema/registry-item.json\"\n\n        // Loop through each file in the files array.\n        for (const file of registryItem.files ?? []) {\n          file[\"content\"] = await fs.readFile(\n            path.resolve(resolvePaths.cwd, file.path),\n            \"utf-8\"\n          )\n        }\n\n        // Validate the registry item.\n        const result = registryItemSchema.safeParse(registryItem)\n        if (!result.success) {\n          logger.error(\n            `Invalid registry item found for ${highlighter.info(\n              registryItem.name\n            )}.`\n          )\n          continue\n        }\n\n        // Write the registry item to the output directory.\n        await fs.writeFile(\n          path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n          JSON.stringify(result.data, null, 2)\n        )\n      }\n\n      // Copy registry.json to the output directory.\n      await fs.copyFile(\n        resolvePaths.registryFile,\n        path.resolve(resolvePaths.outputDir, \"registry.json\")\n      )\n\n      buildSpinner.succeed(\"Building registry.\")\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import path from \"path\"\nimport { getPreset, getPresets, getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { isUrl } from \"@/src/registry/utils\"\nimport { Preset } from \"@/src/schema\"\nimport { addComponents } from \"@/src/utils/add-components\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { updateFiles } from \"@/src/utils/updaters/update-files\"\nimport { Command } from \"commander\"\nimport dedent from \"dedent\"\nimport open from \"open\"\nimport prompts from \"prompts\"\n\nimport { initOptionsSchema, runInit } from \"./init\"\n\nconst SHADCN_URL = \"https://ui.shadcn.com\"\n\nconst CREATE_TEMPLATES = {\n  next: \"Next.js\",\n  vite: \"Vite\",\n  start: \"TanStack Start\",\n} as const\n\ntype Template = keyof typeof CREATE_TEMPLATES\n\nexport const create = new Command()\n  .name(\"create\")\n  .description(\"create a new project with shadcn/ui\")\n  .argument(\"[name]\", \"the name of your project\")\n  .option(\n    \"-t, --template <template>\",\n    \"the template to use. e.g. next, start or vite\"\n  )\n  .option(\"-p, --preset [name]\", \"use a preset configuration\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\n    \"--src-dir\",\n    \"use the src directory when creating a new project.\",\n    false\n  )\n  .option(\n    \"--no-src-dir\",\n    \"do not use the src directory when creating a new project.\"\n  )\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", true)\n  .action(async (name, opts) => {\n    try {\n      // If no arguments or options provided, show initial prompt.\n      const hasNoArgs = !name && !opts.template && !opts.preset\n      if (hasNoArgs) {\n        const createUrl = getShadcnCreateUrl()\n        logger.log(\"Build your own shadcn/ui.\")\n        logger.log(\n          `You will be taken to ${highlighter.info(\n            createUrl\n          )} to build your custom design system.`\n        )\n        logger.break()\n\n        const { proceed } = await prompts({\n          type: \"confirm\",\n          name: \"proceed\",\n          message: \"Open in browser?\",\n          initial: true,\n        })\n\n        if (proceed) {\n          await open(createUrl)\n        }\n\n        process.exit(0)\n      }\n\n      // Prompt for project name if not provided.\n      let projectName = name\n      if (!projectName) {\n        const { enteredName } = await prompts({\n          type: \"text\",\n          name: \"enteredName\",\n          message: \"What is your project named?\",\n          initial: opts.template ? `${opts.template}-app` : \"my-app\",\n          format: (value: string) => value.trim(),\n          validate: (value: string) =>\n            value.length > 128\n              ? `Name should be less than 128 characters.`\n              : true,\n        })\n\n        if (!enteredName) {\n          process.exit(0)\n        }\n\n        projectName = enteredName\n      }\n\n      // Prompt for template if not provided.\n      let template = opts.template\n      if (!template) {\n        const { selectedTemplate } = await prompts({\n          type: \"select\",\n          name: \"selectedTemplate\",\n          message: `Which ${highlighter.info(\n            \"template\"\n          )} would you like to use?`,\n          choices: Object.entries(CREATE_TEMPLATES).map(([key, value]) => ({\n            title: value,\n            value: key,\n          })),\n        })\n\n        if (!selectedTemplate) {\n          process.exit(0)\n        }\n\n        template = selectedTemplate\n      }\n\n      // Handle preset selection.\n      const presetResult = await handlePresetOption(opts.preset ?? true)\n\n      if (!presetResult) {\n        process.exit(0)\n      }\n\n      // Determine initUrl and baseColor based on preset type.\n      let initUrl: string\n      let baseColor: string\n\n      if (\"_isUrl\" in presetResult) {\n        // User provided a URL directly.\n        initUrl = presetResult.url\n        const url = new URL(presetResult.url)\n        baseColor = url.searchParams.get(\"baseColor\") ?? \"neutral\"\n      } else {\n        // User selected a preset by name.\n        initUrl = buildInitUrl(presetResult)\n        baseColor = presetResult.baseColor\n      }\n\n      // Fetch the registry:base item to get its config.\n      let shadowConfig = configWithDefaults({})\n      const { config: updatedConfig } = await ensureRegistriesInConfig(\n        [initUrl],\n        shadowConfig,\n        { silent: true }\n      )\n      shadowConfig = updatedConfig\n\n      const [item] = await getRegistryItems([initUrl], {\n        config: shadowConfig,\n      })\n\n      // Extract config from registry:base item.\n      let registryBaseConfig = undefined\n      if (item?.type === \"registry:base\" && item.config) {\n        registryBaseConfig = item.config\n      }\n\n      const options = initOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        name: projectName,\n        components: [initUrl],\n        yes: opts.yes,\n        defaults: false,\n        force: false,\n        silent: false,\n        isNewProject: true,\n        srcDir: opts.srcDir,\n        cssVariables: true,\n        template,\n        baseColor,\n        baseStyle: false,\n        registryBaseConfig,\n        skipPreflight: false,\n      })\n\n      const config = await runInit(options)\n\n      // Add component example.\n      if (config) {\n        await addComponents([\"component-example\"], config, {\n          baseStyle: false,\n          silent: true,\n          overwrite: true,\n        })\n\n        const templateFiles = getTemplateFiles(template as Template)\n        if (templateFiles.length > 0) {\n          await updateFiles(templateFiles, config, {\n            overwrite: true,\n            silent: true,\n          })\n        }\n      }\n\n      logger.log(\n        `${highlighter.success(\n          \"Success!\"\n        )} Project initialization completed.\\nYou may now add components.`\n      )\n      logger.break()\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n\nfunction buildInitUrl(preset: Preset) {\n  const params = new URLSearchParams({\n    base: preset.base,\n    style: preset.style,\n    baseColor: preset.baseColor,\n    theme: preset.theme,\n    iconLibrary: preset.iconLibrary,\n    font: preset.font,\n    menuAccent: preset.menuAccent,\n    menuColor: preset.menuColor,\n    radius: preset.radius,\n  })\n\n  return `${getShadcnInitUrl()}?${params.toString()}`\n}\n\nasync function handlePresetOption(presetArg: string | boolean) {\n  // If --preset is used without a name, show interactive list.\n  if (presetArg === true) {\n    const presets = await getPresets()\n\n    const { selectedPreset } = await prompts({\n      type: \"select\",\n      name: \"selectedPreset\",\n      message: `Which ${highlighter.info(\"preset\")} would you like to use?`,\n      choices: [\n        ...presets.map((preset) => ({\n          title: preset.title,\n          description: preset.description,\n          value: preset.name,\n        })),\n        {\n          title: \"Custom\",\n          description: \"Build your own on https://ui.shadcn.com\",\n          value: \"custom\",\n        },\n      ],\n    })\n\n    if (!selectedPreset) {\n      return null\n    }\n\n    if (selectedPreset === \"custom\") {\n      const url = getShadcnCreateUrl()\n      logger.info(`\\nOpening ${highlighter.info(url)} in your browser...\\n`)\n      await open(url)\n      return null\n    }\n\n    return presets.find((p) => p.name === selectedPreset) ?? null\n  }\n\n  // If --preset NAME or URL is provided.\n  if (typeof presetArg === \"string\") {\n    // Check if it's a URL.\n    if (isUrl(presetArg)) {\n      return { _isUrl: true, url: presetArg } as const\n    }\n\n    // Otherwise, fetch that preset by name.\n    const preset = await getPreset(presetArg)\n\n    if (!preset) {\n      const presets = await getPresets()\n      const presetNames = presets.map((p) => p.name).join(\", \")\n      logger.error(\n        `Preset \"${presetArg}\" not found. Available presets: ${presetNames}`\n      )\n      process.exit(1)\n    }\n\n    return preset\n  }\n\n  return null\n}\n\nfunction getTemplateFiles(template: Template) {\n  switch (template) {\n    case \"vite\":\n      return [\n        {\n          type: \"registry:file\" as const,\n          path: \"src/App.tsx\",\n          target: \"src/App.tsx\",\n          content: dedent`import { ComponentExample } from \"@/components/component-example\";\n\nexport function App() {\n  return <ComponentExample />;\n}\n\nexport default App;\n`,\n        },\n      ]\n    case \"next\":\n      return [\n        {\n          type: \"registry:page\" as const,\n          path: \"app/page.tsx\",\n          target: \"app/page.tsx\",\n          content: dedent`import { ComponentExample } from \"@/components/component-example\";\n\nexport default function Page() {\n  return <ComponentExample />;\n}\n`,\n        },\n      ]\n    case \"start\":\n      return [\n        {\n          type: \"registry:file\" as const,\n          path: \"src/routes/index.tsx\",\n          target: \"src/routes/index.tsx\",\n          content: dedent`import { createFileRoute } from \"@tanstack/react-router\";\nimport { ComponentExample } from \"@/components/component-example\";\n\nexport const Route = createFileRoute(\"/\")({ component: App });\n\nfunction App() {\n  return (\n    <ComponentExample />\n  );\n}\n`,\n        },\n      ]\n    default:\n      return []\n  }\n}\n\nfunction getShadcnCreateUrl() {\n  return `${SHADCN_URL}/create`\n}\n\nfunction getShadcnInitUrl() {\n  return `${SHADCN_URL}/init`\n}\n","import { existsSync, promises as fs } from \"fs\"\nimport path from \"path\"\nimport {\n  fetchTree,\n  getItemTargetPath,\n  getRegistryBaseColor,\n  getShadcnRegistryIndex,\n} from \"@/src/registry/api\"\nimport { registryIndexSchema } from \"@/src/schema\"\nimport { Config, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { transform } from \"@/src/utils/transformers\"\nimport { Command } from \"commander\"\nimport { diffLines, type Change } from \"diff\"\nimport { z } from \"zod\"\n\nconst updateOptionsSchema = z.object({\n  component: z.string().optional(),\n  yes: z.boolean(),\n  cwd: z.string(),\n  path: z.string().optional(),\n})\n\nexport const diff = new Command()\n  .name(\"diff\")\n  .description(\"check for updates against the registry\")\n  .argument(\"[component]\", \"the component name\")\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (name, opts) => {\n    try {\n      const options = updateOptionsSchema.parse({\n        component: name,\n        ...opts,\n      })\n\n      const cwd = path.resolve(options.cwd)\n\n      if (!existsSync(cwd)) {\n        logger.error(`The path ${cwd} does not exist. Please try again.`)\n        process.exit(1)\n      }\n\n      const config = await getConfig(cwd)\n      if (!config) {\n        logger.warn(\n          `Configuration is missing. Please run ${highlighter.success(\n            `init`\n          )} to create a components.json file.`\n        )\n        process.exit(1)\n      }\n\n      const registryIndex = await getShadcnRegistryIndex()\n\n      if (!registryIndex) {\n        handleError(new Error(\"Failed to fetch registry index.\"))\n        process.exit(1)\n      }\n\n      if (!options.component) {\n        const targetDir = config.resolvedPaths.components\n\n        // Find all components that exist in the project.\n        const projectComponents = registryIndex.filter((item) => {\n          for (const file of item.files ?? []) {\n            const filePath = path.resolve(\n              targetDir,\n              typeof file === \"string\" ? file : file.path\n            )\n            if (existsSync(filePath)) {\n              return true\n            }\n          }\n\n          return false\n        })\n\n        // Check for updates.\n        const componentsWithUpdates = []\n        for (const component of projectComponents) {\n          const changes = await diffComponent(component, config)\n          if (changes.length) {\n            componentsWithUpdates.push({\n              name: component.name,\n              changes,\n            })\n          }\n        }\n\n        if (!componentsWithUpdates.length) {\n          logger.info(\"No updates found.\")\n          process.exit(0)\n        }\n\n        logger.info(\"The following components have updates available:\")\n        for (const component of componentsWithUpdates) {\n          logger.info(`- ${component.name}`)\n          for (const change of component.changes) {\n            logger.info(`  - ${change.filePath}`)\n          }\n        }\n        logger.break()\n        logger.info(\n          `Run ${highlighter.success(`diff <component>`)} to see the changes.`\n        )\n        process.exit(0)\n      }\n\n      // Show diff for a single component.\n      const component = registryIndex.find(\n        (item) => item.name === options.component\n      )\n\n      if (!component) {\n        logger.error(\n          `The component ${highlighter.success(\n            options.component\n          )} does not exist.`\n        )\n        process.exit(1)\n      }\n\n      const changes = await diffComponent(component, config)\n\n      if (!changes.length) {\n        logger.info(`No updates found for ${options.component}.`)\n        process.exit(0)\n      }\n\n      for (const change of changes) {\n        logger.info(`- ${change.filePath}`)\n        await printDiff(change.patch)\n        logger.info(\"\")\n      }\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nasync function diffComponent(\n  component: z.infer<typeof registryIndexSchema>[number],\n  config: Config\n) {\n  const payload = await fetchTree(config.style, [component])\n  const baseColor = await getRegistryBaseColor(config.tailwind.baseColor)\n\n  if (!payload) {\n    return []\n  }\n\n  const changes = []\n\n  for (const item of payload) {\n    const targetDir = await getItemTargetPath(config, item)\n\n    if (!targetDir) {\n      continue\n    }\n\n    for (const file of item.files ?? []) {\n      const filePath = path.resolve(\n        targetDir,\n        typeof file === \"string\" ? file : file.path\n      )\n\n      if (!existsSync(filePath)) {\n        continue\n      }\n\n      const fileContent = await fs.readFile(filePath, \"utf8\")\n\n      if (typeof file === \"string\" || !file.content) {\n        continue\n      }\n\n      const registryContent = await transform({\n        filename: file.path,\n        raw: file.content,\n        config,\n        baseColor,\n      })\n\n      const patch = diffLines(registryContent as string, fileContent)\n      if (patch.length > 1) {\n        changes.push({\n          filePath,\n          patch,\n        })\n      }\n    }\n  }\n\n  return changes\n}\n\nasync function printDiff(diff: Change[]) {\n  diff.forEach((part) => {\n    if (part) {\n      if (part.added) {\n        return process.stdout.write(highlighter.success(part.value))\n      }\n      if (part.removed) {\n        return process.stdout.write(highlighter.error(part.value))\n      }\n\n      return process.stdout.write(part.value)\n    }\n  })\n}\n","import { getConfig } from \"@/src/utils/get-config\"\nimport { getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const info = new Command()\n  .name(\"info\")\n  .description(\"get information about your project\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (opts) => {\n    try {\n      logger.info(\"> project info\")\n      console.log(await getProjectInfo(opts.cwd))\n      logger.break()\n      logger.info(\"> components.json\")\n      console.log(await getConfig(opts.cwd))\n    } catch (error) {\n      handleError(error)\n    }\n  })\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { server } from \"@/src/mcp\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { getPackageManager } from \"@/src/utils/get-package-manager\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\"\nimport { Command } from \"commander\"\nimport deepmerge from \"deepmerge\"\nimport { execa } from \"execa\"\nimport fsExtra from \"fs-extra\"\nimport prompts from \"prompts\"\nimport z from \"zod\"\n\nconst SHADCN_MCP_VERSION = \"latest\"\n\nconst CLIENTS = [\n  {\n    name: \"claude\",\n    label: \"Claude Code\",\n    configPath: \".mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"cursor\",\n    label: \"Cursor\",\n    configPath: \".cursor/mcp.json\",\n    config: {\n      mcpServers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"vscode\",\n    label: \"VS Code\",\n    configPath: \".vscode/mcp.json\",\n    config: {\n      servers: {\n        shadcn: {\n          command: \"npx\",\n          args: [`shadcn@${SHADCN_MCP_VERSION}`, \"mcp\"],\n        },\n      },\n    },\n  },\n  {\n    name: \"codex\",\n    label: \"Codex\",\n    configPath: \".codex/config.toml\",\n    config: `[mcp_servers.shadcn]\ncommand = \"npx\"\nargs = [\"shadcn@${SHADCN_MCP_VERSION}\", \"mcp\"]\n`,\n  },\n] as const\n\nconst DEPENDENCIES = [`shadcn@${SHADCN_MCP_VERSION}`]\n\nexport const mcp = new Command()\n  .name(\"mcp\")\n  .description(\"MCP server and configuration commands\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (options) => {\n    try {\n      await loadEnvFiles(options.cwd)\n      const transport = new StdioServerTransport()\n      await server.connect(transport)\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n\nconst mcpInitOptionsSchema = z.object({\n  client: z.enum([\"claude\", \"cursor\", \"vscode\", \"codex\"]),\n  cwd: z.string(),\n})\n\nmcp\n  .command(\"init\")\n  .description(\"Initialize MCP configuration for your client\")\n  .option(\n    \"--client <client>\",\n    `MCP client (${CLIENTS.map((c) => c.name).join(\", \")})`\n  )\n  .action(async (opts, command) => {\n    try {\n      // Get the cwd from parent command.\n      const parentOpts = command.parent?.opts() || {}\n      const cwd = parentOpts.cwd || process.cwd()\n\n      let client = opts.client\n\n      if (!client) {\n        const response = await prompts({\n          type: \"select\",\n          name: \"client\",\n          message: \"Which MCP client are you using?\",\n          choices: CLIENTS.map((c) => ({\n            title: c.label,\n            value: c.name,\n          })),\n        })\n\n        if (!response.client) {\n          logger.break()\n          process.exit(1)\n        }\n\n        client = response.client\n      }\n\n      const options = mcpInitOptionsSchema.parse({\n        client,\n        cwd,\n      })\n\n      const config = await getConfig(options.cwd)\n\n      if (options.client === \"codex\") {\n        if (config) {\n          await updateDependencies([], DEPENDENCIES, config, {\n            silent: false,\n          })\n        } else {\n          const packageManager = await getPackageManager(options.cwd)\n          const installCommand = packageManager === \"npm\" ? \"install\" : \"add\"\n          const devFlag = packageManager === \"npm\" ? \"--save-dev\" : \"-D\"\n\n          const installSpinner = spinner(\"Installing dependencies...\").start()\n          await execa(\n            packageManager,\n            [installCommand, devFlag, ...DEPENDENCIES],\n            {\n              cwd: options.cwd,\n            }\n          )\n          installSpinner.succeed(\"Installing dependencies.\")\n        }\n\n        logger.break()\n        logger.log(\"To configure the shadcn MCP server in Codex:\")\n        logger.break()\n        logger.log(\n          `1. Open or create the file ${highlighter.info(\n            \"~/.codex/config.toml\"\n          )}`\n        )\n        logger.log(\"2. Add the following configuration:\")\n        logger.log()\n        logger.info(`[mcp_servers.shadcn]\ncommand = \"npx\"\nargs = [\"shadcn@${SHADCN_MCP_VERSION}\", \"mcp\"]`)\n        logger.break()\n        logger.info(\"3. Restart Codex to load the MCP server\")\n        logger.break()\n        process.exit(0)\n      }\n\n      const configSpinner = spinner(\"Configuring MCP server...\").start()\n      const configPath = await runMcpInit(options)\n      configSpinner.succeed(\"Configuring MCP server.\")\n\n      if (config) {\n        await updateDependencies([], DEPENDENCIES, config, {\n          silent: false,\n        })\n      } else {\n        const packageManager = await getPackageManager(options.cwd)\n        const installCommand = packageManager === \"npm\" ? \"install\" : \"add\"\n        const devFlag = packageManager === \"npm\" ? \"--save-dev\" : \"-D\"\n\n        const installSpinner = spinner(\"Installing dependencies...\").start()\n        await execa(\n          packageManager,\n          [installCommand, devFlag, ...DEPENDENCIES],\n          {\n            cwd: options.cwd,\n          }\n        )\n        installSpinner.succeed(\"Installing dependencies.\")\n      }\n\n      logger.break()\n      logger.success(`Configuration saved to ${configPath}.`)\n      logger.break()\n    } catch (error) {\n      handleError(error)\n    }\n  })\n\nconst overwriteMerge = (_: any[], sourceArray: any[]) => sourceArray\n\nasync function runMcpInit(options: z.infer<typeof mcpInitOptionsSchema>) {\n  const { client, cwd } = options\n\n  const clientInfo = CLIENTS.find((c) => c.name === client)\n  if (!clientInfo) {\n    throw new Error(\n      `Unknown client: ${client}. Available clients: ${CLIENTS.map(\n        (c) => c.name\n      ).join(\", \")}`\n    )\n  }\n\n  const configPath = path.join(cwd, clientInfo.configPath)\n  const dir = path.dirname(configPath)\n  await fsExtra.ensureDir(dir)\n\n  // Handle JSON format.\n  let existingConfig = {}\n  try {\n    const content = await fs.readFile(configPath, \"utf-8\")\n    existingConfig = JSON.parse(content)\n  } catch {}\n\n  const mergedConfig = deepmerge(\n    existingConfig,\n    clientInfo.config as Record<string, unknown>,\n    { arrayMerge: overwriteMerge }\n  )\n\n  await fs.writeFile(\n    configPath,\n    JSON.stringify(mergedConfig, null, 2) + \"\\n\",\n    \"utf-8\"\n  )\n\n  return clientInfo.configPath\n}\n","export const LEGACY_ICON_LIBRARIES = {\n  lucide: {\n    name: \"lucide-react\",\n    package: \"lucide-react\",\n    import: \"lucide-react\",\n  },\n  radix: {\n    name: \"@radix-ui/react-icons\",\n    package: \"@radix-ui/react-icons\",\n    import: \"@radix-ui/react-icons\",\n  },\n}\n","import { randomBytes } from \"crypto\"\nimport { promises as fs } from \"fs\"\nimport { tmpdir } from \"os\"\nimport path from \"path\"\nimport { getRegistryIcons } from \"@/src/registry/api\"\nimport { iconsSchema } from \"@/src/schema\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { LEGACY_ICON_LIBRARIES } from \"@/src/utils/legacy-icon-libraries\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\nimport { Project, ScriptKind, SyntaxKind } from \"ts-morph\"\nimport { z } from \"zod\"\n\nexport async function migrateIcons(config: Config) {\n  if (!config.resolvedPaths.ui) {\n    throw new Error(\n      \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n    )\n  }\n\n  const uiPath = config.resolvedPaths.ui\n  const [files, registryIcons] = await Promise.all([\n    fg(\"**/*.{js,ts,jsx,tsx}\", {\n      cwd: uiPath,\n    }),\n    getRegistryIcons(),\n  ])\n\n  if (Object.keys(registryIcons).length === 0) {\n    throw new Error(\"Something went wrong fetching the registry icons.\")\n  }\n\n  const libraryChoices = Object.entries(LEGACY_ICON_LIBRARIES).map(\n    ([name, iconLibrary]) => ({\n      title: iconLibrary.name,\n      value: name,\n    })\n  )\n\n  const migrateOptions = await prompts([\n    {\n      type: \"select\",\n      name: \"sourceLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate from\"\n      )}?`,\n      choices: libraryChoices,\n    },\n    {\n      type: \"select\",\n      name: \"targetLibrary\",\n      message: `Which icon library would you like to ${highlighter.info(\n        \"migrate to\"\n      )}?`,\n      choices: libraryChoices,\n    },\n  ])\n\n  if (migrateOptions.sourceLibrary === migrateOptions.targetLibrary) {\n    throw new Error(\n      \"You cannot migrate to the same icon library. Please choose a different icon library.\"\n    )\n  }\n\n  if (\n    !(\n      migrateOptions.sourceLibrary in LEGACY_ICON_LIBRARIES &&\n      migrateOptions.targetLibrary in LEGACY_ICON_LIBRARIES\n    )\n  ) {\n    throw new Error(\"Invalid icon library. Please choose a valid icon library.\")\n  }\n\n  const sourceLibrary =\n    LEGACY_ICON_LIBRARIES[\n      migrateOptions.sourceLibrary as keyof typeof LEGACY_ICON_LIBRARIES\n    ]\n  const targetLibrary =\n    LEGACY_ICON_LIBRARIES[\n      migrateOptions.targetLibrary as keyof typeof LEGACY_ICON_LIBRARIES\n    ]\n  const { confirm } = await prompts({\n    type: \"confirm\",\n    name: \"confirm\",\n    initial: true,\n    message: `We will migrate ${highlighter.info(\n      files.length\n    )} files in ${highlighter.info(\n      `./${path.relative(config.resolvedPaths.cwd, uiPath)}`\n    )} from ${highlighter.info(sourceLibrary.name)} to ${highlighter.info(\n      targetLibrary.name\n    )}. Continue?`,\n  })\n\n  if (!confirm) {\n    logger.info(\"Migration cancelled.\")\n    process.exit(0)\n  }\n\n  if (targetLibrary.package) {\n    await updateDependencies([targetLibrary.package], [], config, {\n      silent: false,\n    })\n  }\n\n  const migrationSpinner = spinner(`Migrating icons...`)?.start()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(uiPath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const content = await migrateIconsFile(\n        fileContent,\n        migrateOptions.sourceLibrary,\n        migrateOptions.targetLibrary,\n        registryIcons\n      )\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migration complete.\")\n}\n\nexport async function migrateIconsFile(\n  content: string,\n  sourceLibrary: keyof typeof LEGACY_ICON_LIBRARIES,\n  targetLibrary: keyof typeof LEGACY_ICON_LIBRARIES,\n  iconsMapping: z.infer<typeof iconsSchema>\n) {\n  const sourceLibraryImport = LEGACY_ICON_LIBRARIES[sourceLibrary]?.import\n  const targetLibraryImport = LEGACY_ICON_LIBRARIES[targetLibrary]?.import\n\n  const dir = await fs.mkdtemp(path.join(tmpdir(), \"shadcn-\"))\n  const project = new Project({\n    compilerOptions: {},\n  })\n\n  const tempFile = path.join(\n    dir,\n    `shadcn-icons-${randomBytes(4).toString(\"hex\")}.tsx`\n  )\n  const sourceFile = project.createSourceFile(tempFile, content, {\n    scriptKind: ScriptKind.TSX,\n  })\n\n  // Find all sourceLibrary imports.\n  let targetedIcons: string[] = []\n  for (const importDeclaration of sourceFile.getImportDeclarations() ?? []) {\n    if (\n      importDeclaration.getModuleSpecifier()?.getText() !==\n      `\"${sourceLibraryImport}\"`\n    ) {\n      continue\n    }\n\n    for (const specifier of importDeclaration.getNamedImports() ?? []) {\n      const iconName = specifier.getName()\n\n      // TODO: this is O(n^2) but okay for now.\n      const targetedIcon = Object.values(iconsMapping).find(\n        (icon) => icon[sourceLibrary] === iconName\n      )?.[targetLibrary]\n\n      if (!targetedIcon || targetedIcons.includes(targetedIcon)) {\n        continue\n      }\n\n      targetedIcons.push(targetedIcon)\n\n      // Remove the named import.\n      specifier.remove()\n\n      // Replace with the targeted icon.\n      sourceFile\n        .getDescendantsOfKind(SyntaxKind.JsxSelfClosingElement)\n        .filter((node) => node.getTagNameNode()?.getText() === iconName)\n        .forEach((node) => node.getTagNameNode()?.replaceWithText(targetedIcon))\n    }\n\n    // If the named import is empty, remove the import declaration.\n    if (importDeclaration.getNamedImports()?.length === 0) {\n      importDeclaration.remove()\n    }\n  }\n\n  if (targetedIcons.length > 0) {\n    sourceFile.addImportDeclaration({\n      moduleSpecifier: targetLibraryImport,\n      namedImports: targetedIcons.map((icon) => ({\n        name: icon,\n      })),\n    })\n  }\n\n  return await sourceFile.getText()\n}\n","import { promises as fs } from \"fs\"\nimport path from \"path\"\nimport { Config } from \"@/src/utils/get-config\"\nimport { getPackageInfo } from \"@/src/utils/get-package-info\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { updateDependencies } from \"@/src/utils/updaters/update-dependencies\"\nimport fg from \"fast-glob\"\nimport prompts from \"prompts\"\n\nfunction toPascalCase(str: string): string {\n  return str\n    .split(\"-\")\n    .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n    .join(\"\")\n}\n\nfunction processNamedImports(\n  namedImports: string,\n  isTypeOnly: boolean,\n  imports: Array<{ name: string; alias?: string; isType?: boolean }>,\n  packageName: string\n) {\n  // Clean up multi-line imports.\n  // Remove comments and whitespace.\n  const cleanedImports = namedImports\n    .replace(/\\/\\/.*$/gm, \"\")\n    .replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\")\n    .replace(/\\s+/g, \" \")\n    .trim()\n\n  const namedImportList = cleanedImports\n    .split(\",\")\n    .map((importItem) => importItem.trim())\n    .filter(Boolean)\n\n  for (const importItem of namedImportList) {\n    const inlineTypeMatch = importItem.match(/^type\\s+(\\w+)(?:\\s+as\\s+(\\w+))?$/)\n    const aliasMatch = importItem.match(/^(\\w+)\\s+as\\s+(\\w+)$/)\n\n    if (inlineTypeMatch) {\n      // Inline type: \"type DialogProps\" or \"type DialogProps as Props\"\n      const importName = inlineTypeMatch[1]\n      const importAlias = inlineTypeMatch[2]\n\n      if (packageName === \"slot\" && importName === \"Slot\" && !importAlias) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: true,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: true,\n        })\n      }\n    } else if (aliasMatch) {\n      // Regular import with alias: \"Root as DialogRoot\"\n      const importName = aliasMatch[1]\n      const importAlias = aliasMatch[2]\n\n      if (\n        packageName === \"slot\" &&\n        importName === \"Slot\" &&\n        importAlias === \"Slot\"\n      ) {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importName,\n          alias: importAlias,\n          isType: isTypeOnly,\n        })\n      }\n    } else {\n      // Simple import: \"Root\"\n      // Special handling for Slot: always alias it as SlotPrimitive\n      if (packageName === \"slot\" && importItem === \"Slot\") {\n        imports.push({\n          name: \"Slot\",\n          alias: \"SlotPrimitive\",\n          isType: isTypeOnly,\n        })\n      } else {\n        imports.push({\n          name: importItem,\n          isType: isTypeOnly,\n        })\n      }\n    }\n  }\n}\n\nexport async function migrateRadix(\n  config: Config,\n  options: { yes?: boolean } = {}\n) {\n  if (!config.resolvedPaths.ui) {\n    throw new Error(\n      \"We could not find a valid `ui` path in your `components.json` file. Please ensure you have a valid `ui` path in your `components.json` file.\"\n    )\n  }\n\n  const uiPath = config.resolvedPaths.ui\n  const files = await fg(\"**/*.{js,ts,jsx,tsx}\", {\n    cwd: uiPath,\n  })\n\n  if (!options.yes) {\n    const { confirm } = await prompts({\n      type: \"confirm\",\n      name: \"confirm\",\n      initial: true,\n      message: `We will migrate ${highlighter.info(\n        files.length\n      )} files in ${highlighter.info(\n        `./${path.relative(config.resolvedPaths.cwd, uiPath)}`\n      )} to ${highlighter.info(\"radix-ui\")}. Continue?`,\n    })\n\n    if (!confirm) {\n      logger.info(\"Migration cancelled.\")\n      process.exit(0)\n    }\n  }\n\n  const migrationSpinner = spinner(`Migrating imports...`)?.start()\n  const foundPackages = new Set<string>()\n\n  await Promise.all(\n    files.map(async (file) => {\n      migrationSpinner.text = `Migrating ${file}...`\n\n      const filePath = path.join(uiPath, file)\n      const fileContent = await fs.readFile(filePath, \"utf-8\")\n\n      const { content, replacedPackages } = await migrateRadixFile(fileContent)\n\n      // Track which packages we found\n      replacedPackages.forEach((pkg) => foundPackages.add(pkg))\n\n      await fs.writeFile(filePath, content)\n    })\n  )\n\n  migrationSpinner.succeed(\"Migrating imports.\")\n\n  // Update package.json dependencies\n  const packageSpinner = spinner(`Updating package.json...`)?.start()\n\n  try {\n    const packageJson = getPackageInfo(config.resolvedPaths.cwd, false)\n\n    if (!packageJson) {\n      packageSpinner.fail(\"Could not read package.json\")\n      logger.warn(\n        \"Could not update package.json. You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n      )\n      return\n    }\n\n    const foundPackagesArray = Array.from(foundPackages)\n\n    // Remove packages from both dependencies and devDependencies if found in source files\n    const dependencyTypes = [\"dependencies\", \"devDependencies\"] as const\n    for (const depType of dependencyTypes) {\n      if (packageJson[depType]) {\n        for (const pkg of foundPackagesArray) {\n          if (packageJson[depType]![pkg]) {\n            delete packageJson[depType]![pkg]\n          }\n        }\n      }\n    }\n\n    // Add radix-ui if we found any Radix packages.\n    if (foundPackagesArray.length > 0) {\n      if (!packageJson.dependencies) {\n        packageJson.dependencies = {}\n      }\n      packageJson.dependencies[\"radix-ui\"] = \"latest\"\n\n      const packageJsonPath = path.join(\n        config.resolvedPaths.cwd,\n        \"package.json\"\n      )\n      await fs.writeFile(\n        packageJsonPath,\n        JSON.stringify(packageJson, null, 2) + \"\\n\"\n      )\n\n      packageSpinner.succeed(`Updated package.json.`)\n\n      // Install radix-ui dependency.\n      await updateDependencies([\"radix-ui\"], [], config, { silent: false })\n    } else {\n      packageSpinner.succeed(\"No packages found in source files.\")\n    }\n  } catch (error) {\n    packageSpinner.fail(\"Failed to update package.json\")\n    logger.warn(\n      \"You may need to manually replace @radix-ui/react-* packages with radix-ui\"\n    )\n  }\n}\n\nexport async function migrateRadixFile(\n  content: string\n): Promise<{ content: string; replacedPackages: string[] }> {\n  // Enhanced regex to handle type-only imports, but exclude react-icons\n  // Also capture optional semicolon at the end\n  const radixImportPattern =\n    /import\\s+(?:(type)\\s+)?(?:\\*\\s+as\\s+(\\w+)|{([^}]+)})\\s+from\\s+([\"'])@radix-ui\\/react-([^\"']+)\\4(;?)/g\n\n  const imports: Array<{ name: string; alias?: string; isType?: boolean }> = []\n  const linesToRemove: string[] = []\n  const replacedPackages: string[] = []\n  let quoteStyle = '\"' // Default to double quotes\n  let hasSemicolon = false // Track if any import had a semicolon\n\n  let result = content\n  let match\n\n  // Find all Radix imports\n  while ((match = radixImportPattern.exec(content)) !== null) {\n    const [\n      fullMatch,\n      typeKeyword,\n      namespaceAlias,\n      namedImports,\n      quote,\n      packageName,\n      semicolon,\n    ] = match\n\n    // Skip react-icons package and any sub-paths (like react-icons/dist/types)\n    if (packageName === \"icons\" || packageName.startsWith(\"icons/\")) {\n      continue\n    }\n\n    linesToRemove.push(fullMatch)\n\n    // Use the quote style and semicolon style from the first import\n    if (linesToRemove.length === 1) {\n      quoteStyle = quote\n      hasSemicolon = semicolon === \";\"\n    }\n\n    // Track which package we're replacing\n    replacedPackages.push(`@radix-ui/react-${packageName}`)\n\n    const isTypeOnly = Boolean(typeKeyword)\n\n    if (namespaceAlias) {\n      // Handle namespace imports: import * as DialogPrimitive from \"@radix-ui/react-dialog\"\n      const componentName = toPascalCase(packageName)\n      imports.push({\n        name: componentName,\n        alias: namespaceAlias,\n        isType: isTypeOnly,\n      })\n    } else if (namedImports) {\n      // Handle named imports: import { Root, Trigger } from \"@radix-ui/react-dialog\"\n      // or import type { DialogProps } from \"@radix-ui/react-dialog\"\n      // or import { type DialogProps, Root } from \"@radix-ui/react-dialog\"\n\n      processNamedImports(namedImports, isTypeOnly, imports, packageName)\n    }\n  }\n\n  if (imports.length === 0) {\n    return {\n      content,\n      replacedPackages: [],\n    }\n  }\n\n  // Remove duplicates.\n  // Considering name, alias, and type status.\n  const uniqueImports = imports.filter(\n    (importName, index, self) =>\n      index ===\n      self.findIndex(\n        (i) =>\n          i.name === importName.name &&\n          i.alias === importName.alias &&\n          i.isType === importName.isType\n      )\n  )\n\n  // Create the unified import with preserved quote style and type annotations\n  const importList = uniqueImports\n    .map((imp) => {\n      const typePrefix = imp.isType ? \"type \" : \"\"\n      return imp.alias\n        ? `${typePrefix}${imp.name} as ${imp.alias}`\n        : `${typePrefix}${imp.name}`\n    })\n    .join(\", \")\n\n  const unifiedImport = `import { ${importList} } from ${quoteStyle}radix-ui${quoteStyle}${\n    hasSemicolon ? \";\" : \"\"\n  }`\n\n  // Replace first import with unified import, remove the rest\n  result = linesToRemove.reduce((acc, line, index) => {\n    return acc.replace(line, index === 0 ? unifiedImport : \"\")\n  }, result)\n\n  // Clean up extra blank lines\n  result = result.replace(/\\n\\s*\\n\\s*\\n/g, \"\\n\\n\")\n\n  // Handle special case for Slot usage transformation\n  // Now that we import { Slot as SlotPrimitive }, we need to:\n  // 1. Transform: const Comp = asChild ? Slot : [ANYTHING] -> const Comp = asChild ? SlotPrimitive.Slot : [ANYTHING]\n  // 2. Transform: React.ComponentProps<typeof Slot> -> React.ComponentProps<typeof SlotPrimitive.Slot>\n  const hasSlotImport = uniqueImports.some(\n    (imp) => imp.name === \"Slot\" && imp.alias === \"SlotPrimitive\"\n  )\n\n  if (hasSlotImport) {\n    // Find all lines that are NOT import lines to avoid transforming the import statement itself\n    const lines = result.split(\"\\n\")\n    const transformedLines = lines.map((line) => {\n      // Skip import lines\n      if (line.trim().startsWith(\"import \")) {\n        return line\n      }\n\n      let transformedLine = line\n\n      // Handle all Slot references in one comprehensive pass\n      // Use placeholders to avoid double replacements\n\n      // First, mark specific patterns with placeholders\n      transformedLine = transformedLine.replace(\n        /\\b(asChild\\s*\\?\\s*)Slot(\\s*:)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bReact\\.ComponentProps<typeof\\s+Slot>/g,\n        \"React.ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /\\bComponentProps<typeof\\s+Slot>/g,\n        \"ComponentProps<typeof __SLOT_PLACEHOLDER__>\"\n      )\n\n      transformedLine = transformedLine.replace(\n        /(<\\/?)Slot(\\s*\\/?>)/g,\n        \"$1__SLOT_PLACEHOLDER__$2\"\n      )\n\n      // Handle any other standalone Slot usage\n      transformedLine = transformedLine.replace(\n        /\\bSlot\\b/g,\n        (match, offset, string) => {\n          // Don't transform if it's inside quotes\n          const beforeMatch = string.substring(0, offset)\n          const openQuotes = (beforeMatch.match(/\"/g) || []).length\n          const openSingleQuotes = (beforeMatch.match(/'/g) || []).length\n\n          // If we're inside quotes, don't transform\n          if (openQuotes % 2 !== 0 || openSingleQuotes % 2 !== 0) {\n            return match\n          }\n\n          return \"__SLOT_PLACEHOLDER__\"\n        }\n      )\n\n      // Finally, replace all placeholders with SlotPrimitive.Slot\n      transformedLine = transformedLine.replace(\n        /__SLOT_PLACEHOLDER__/g,\n        \"SlotPrimitive.Slot\"\n      )\n\n      return transformedLine\n    })\n\n    result = transformedLines.join(\"\\n\")\n  }\n\n  // Remove duplicate packages\n  const uniqueReplacedPackages = Array.from(new Set(replacedPackages))\n\n  return {\n    content: result,\n    replacedPackages: uniqueReplacedPackages,\n  }\n}\n","import path from \"path\"\nimport { addOptionsSchema } from \"@/src/commands/add\"\nimport { migrateOptionsSchema } from \"@/src/commands/migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightMigrate(\n  options: z.infer<typeof migrateOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  // Ensure target directory exists.\n  // Check for empty project. We assume if no package.json exists, the project is empty.\n  if (\n    !fs.existsSync(options.cwd) ||\n    !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\n  ) {\n    errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      config: null,\n    }\n  }\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can run a migration, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.error(\n      `Learn more at ${highlighter.info(\n        \"https://ui.shadcn.com/docs/components-json\"\n      )}.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import path from \"path\"\nimport { migrateIcons } from \"@/src/migrations/migrate-icons\"\nimport { migrateRadix } from \"@/src/migrations/migrate-radix\"\nimport { preFlightMigrate } from \"@/src/preflights/preflight-migrate\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const migrations = [\n  {\n    name: \"icons\",\n    description: \"migrate your ui components to a different icon library.\",\n  },\n  {\n    name: \"radix\",\n    description: \"migrate to radix-ui.\",\n  },\n] as const\n\nexport const migrateOptionsSchema = z.object({\n  cwd: z.string(),\n  list: z.boolean(),\n  yes: z.boolean(),\n  migration: z\n    .string()\n    .refine(\n      (value) =>\n        value && migrations.some((migration) => migration.name === value),\n      {\n        message:\n          \"You must specify a valid migration. Run `shadcn migrate --list` to see available migrations.\",\n      }\n    )\n    .optional(),\n})\n\nexport const migrate = new Command()\n  .name(\"migrate\")\n  .description(\"run a migration.\")\n  .argument(\"[migration]\", \"the migration to run.\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-l, --list\", \"list all migrations.\", false)\n  .option(\"-y, --yes\", \"skip confirmation prompt.\", false)\n  .action(async (migration, opts) => {\n    try {\n      const options = migrateOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        migration,\n        list: opts.list,\n        yes: opts.yes,\n      })\n\n      if (options.list || !options.migration) {\n        logger.info(\"Available migrations:\")\n        for (const migration of migrations) {\n          logger.info(`- ${migration.name}: ${migration.description}`)\n        }\n        return\n      }\n\n      if (!options.migration) {\n        throw new Error(\n          \"You must specify a migration. Run `shadcn migrate --list` to see available migrations.\"\n        )\n      }\n\n      let { errors, config } = await preFlightMigrate(options)\n\n      if (\n        errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] ||\n        errors[ERRORS.MISSING_CONFIG]\n      ) {\n        throw new Error(\n          \"No `components.json` file found. Ensure you are at the root of your project.\"\n        )\n      }\n\n      if (!config) {\n        throw new Error(\n          \"Something went wrong reading your `components.json` file. Please ensure you have a valid `components.json` file.\"\n        )\n      }\n\n      if (options.migration === \"icons\") {\n        await migrateIcons(config)\n      }\n\n      if (options.migration === \"radix\") {\n        await migrateRadix(config, { yes: options.yes })\n      }\n    } catch (error) {\n      logger.break()\n      handleError(error)\n    }\n  })\n","import path from \"path\"\nimport { buildOptionsSchema } from \"@/src/commands/build\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport fs from \"fs-extra\"\nimport { z } from \"zod\"\n\nexport async function preFlightRegistryBuild(\n  options: z.infer<typeof buildOptionsSchema>\n) {\n  const errors: Record<string, boolean> = {}\n\n  const resolvePaths = {\n    cwd: options.cwd,\n    registryFile: path.resolve(options.cwd, options.registryFile),\n    outputDir: path.resolve(options.cwd, options.outputDir),\n  }\n\n  // Ensure registry file exists.\n  if (!fs.existsSync(resolvePaths.registryFile)) {\n    errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Check for existing components.json file.\n  if (!fs.existsSync(path.resolve(options.cwd, \"components.json\"))) {\n    errors[ERRORS.MISSING_CONFIG] = true\n    return {\n      errors,\n      resolvePaths: null,\n      config: null,\n    }\n  }\n\n  // Create output directory if it doesn't exist.\n  await fs.mkdir(resolvePaths.outputDir, { recursive: true })\n\n  try {\n    const config = await getConfig(options.cwd)\n\n    return {\n      errors,\n      config: config!,\n      resolvePaths,\n    }\n  } catch (error) {\n    logger.break()\n    logger.error(\n      `An invalid ${highlighter.info(\n        \"components.json\"\n      )} file was found at ${highlighter.info(\n        options.cwd\n      )}.\\nBefore you can build the registry, you must create a valid ${highlighter.info(\n        \"components.json\"\n      )} file by running the ${highlighter.info(\"init\")} command.`\n    )\n    logger.break()\n    process.exit(1)\n  }\n}\n","import * as fs from \"fs/promises\"\nimport * as path from \"path\"\nimport { preFlightRegistryBuild } from \"@/src/preflights/preflight-registry\"\nimport { recursivelyResolveFileImports } from \"@/src/registry/utils\"\nimport { configSchema, registryItemSchema, registrySchema } from \"@/src/schema\"\nimport * as ERRORS from \"@/src/utils/errors\"\nimport { ProjectInfo, getProjectInfo } from \"@/src/utils/get-project-info\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { spinner } from \"@/src/utils/spinner\"\nimport { Command } from \"commander\"\nimport { z } from \"zod\"\n\nexport const buildOptionsSchema = z.object({\n  cwd: z.string(),\n  registryFile: z.string(),\n  outputDir: z.string(),\n  verbose: z.boolean().optional().default(false),\n})\n\nexport const build = new Command()\n  .name(\"registry:build\")\n  .description(\"builds the registry [EXPERIMENTAL]\")\n  .argument(\"[registry]\", \"path to registry.json file\", \"./registry.json\")\n  .option(\n    \"-o, --output <path>\",\n    \"destination directory for json files\",\n    \"./public/r\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-v, --verbose\", \"verbose output\")\n  .action(async (registry: string, opts) => {\n    await buildRegistry({\n      cwd: path.resolve(opts.cwd),\n      registryFile: registry,\n      outputDir: opts.output,\n      verbose: opts.verbose,\n    })\n  })\n\nasync function buildRegistry(opts: z.infer<typeof buildOptionsSchema>) {\n  try {\n    const options = buildOptionsSchema.parse(opts)\n\n    const [{ errors, resolvePaths, config }, projectInfo] = await Promise.all([\n      preFlightRegistryBuild(options),\n      getProjectInfo(options.cwd),\n    ])\n\n    if (errors[ERRORS.MISSING_CONFIG] || !config || !projectInfo) {\n      logger.error(\n        `A ${highlighter.info(\n          \"components.json\"\n        )} file is required to build the registry. Run ${highlighter.info(\n          \"shadcn init\"\n        )} to create one.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    if (errors[ERRORS.BUILD_MISSING_REGISTRY_FILE] || !resolvePaths) {\n      logger.error(\n        `We could not find a registry file at ${highlighter.info(\n          path.resolve(options.cwd, options.registryFile)\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const content = await fs.readFile(resolvePaths.registryFile, \"utf-8\")\n    const result = registrySchema.safeParse(JSON.parse(content))\n\n    if (!result.success) {\n      logger.error(\n        `Invalid registry file found at ${highlighter.info(\n          resolvePaths.registryFile\n        )}.`\n      )\n      logger.break()\n      process.exit(1)\n    }\n\n    const buildSpinner = spinner(\"Building registry...\")\n\n    // Recursively resolve the registry items.\n    const resolvedRegistry = await resolveRegistryItems(\n      result.data,\n      config,\n      projectInfo\n    )\n\n    // Loop through the registry items and remove duplicates files i.e same path.\n    for (const registryItem of resolvedRegistry.items) {\n      // Deduplicate files\n      registryItem.files = registryItem.files?.filter(\n        (file, index, self) =>\n          index === self.findIndex((t) => t.path === file.path)\n      )\n\n      // Deduplicate dependencies\n      if (registryItem.dependencies) {\n        registryItem.dependencies = registryItem.dependencies.filter(\n          (dep, index, self) => index === self.findIndex((d) => d === dep)\n        )\n      }\n    }\n\n    for (const registryItem of resolvedRegistry.items) {\n      if (!registryItem.files) {\n        continue\n      }\n\n      buildSpinner.start(`Building ${registryItem.name}...`)\n\n      // Add the schema to the registry item.\n      registryItem[\"$schema\"] =\n        \"https://ui.shadcn.com/schema/registry-item.json\"\n\n      for (const file of registryItem.files) {\n        const absPath = path.resolve(resolvePaths.cwd, file.path)\n        try {\n          const stat = await fs.stat(absPath)\n          if (!stat.isFile()) {\n            continue\n          }\n          file[\"content\"] = await fs.readFile(absPath, \"utf-8\")\n        } catch (err) {\n          console.error(\"Error reading file in registry build:\", absPath, err)\n          continue\n        }\n      }\n\n      const result = registryItemSchema.safeParse(registryItem)\n      if (!result.success) {\n        logger.error(\n          `Invalid registry item found for ${highlighter.info(\n            registryItem.name\n          )}.`\n        )\n        continue\n      }\n\n      // Write the registry item to the output directory.\n      await fs.writeFile(\n        path.resolve(resolvePaths.outputDir, `${result.data.name}.json`),\n        JSON.stringify(result.data, null, 2)\n      )\n    }\n\n    // Copy registry.json to the output directory.\n    await fs.copyFile(\n      resolvePaths.registryFile,\n      path.resolve(resolvePaths.outputDir, \"registry.json\")\n    )\n\n    buildSpinner.succeed(\"Building registry.\")\n\n    if (options.verbose) {\n      spinner(\n        `The registry has ${highlighter.info(\n          resolvedRegistry.items.length.toString()\n        )} items:`\n      ).succeed()\n      for (const item of resolvedRegistry.items) {\n        logger.log(`  - ${item.name} (${highlighter.info(item.type)})`)\n        for (const file of item.files ?? []) {\n          logger.log(`    - ${file.path}`)\n        }\n      }\n    }\n  } catch (error) {\n    logger.break()\n    handleError(error)\n  }\n}\n\n// This reads the registry and recursively resolves the file imports.\nasync function resolveRegistryItems(\n  registry: z.infer<typeof registrySchema>,\n  config: z.infer<typeof configSchema>,\n  projectInfo: ProjectInfo\n): Promise<z.infer<typeof registrySchema>> {\n  for (const item of registry.items) {\n    if (!item.files?.length) {\n      continue\n    }\n\n    // Process all files in the array instead of just the first one\n    for (const file of item.files) {\n      const results = await recursivelyResolveFileImports(\n        file.path,\n        config,\n        projectInfo\n      )\n\n      // Remove file from results.files\n      results.files = results.files?.filter((f) => f.path !== file.path)\n\n      if (results.files) {\n        item.files.push(...results.files)\n      }\n\n      if (results.dependencies) {\n        item.dependencies = item.dependencies\n          ? item.dependencies.concat(results.dependencies)\n          : results.dependencies\n      }\n    }\n  }\n\n  return registry\n}\n","import { highlighter } from \"@/src/utils/highlighter\"\nimport { logger } from \"@/src/utils/logger\"\nimport { Command } from \"commander\"\n\nexport const mcp = new Command()\n  .name(\"registry:mcp\")\n  .description(\"starts the registry MCP server [DEPRECATED]\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async () => {\n    logger.warn(\n      `The ${highlighter.info(\n        \"shadcn registry:mcp\"\n      )} command is deprecated. Use the ${highlighter.info(\n        \"shadcn mcp\"\n      )} command instead.`\n    )\n    logger.break()\n  })\n","import path from \"path\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { searchRegistries } from \"@/src/registry/search\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { createConfig, getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst searchOptionsSchema = z.object({\n  cwd: z.string(),\n  query: z.string().optional(),\n  limit: z.number().optional(),\n  offset: z.number().optional(),\n})\n\n// TODO: We're duplicating logic for shadowConfig here.\n// Revisit and properly abstract this.\n\nexport const search = new Command()\n  .name(\"search\")\n  .alias(\"list\")\n  .description(\"search items from registries\")\n  .argument(\n    \"<registries...>\",\n    \"the registry names or urls to search items from. Names must be prefixed with @.\"\n  )\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .option(\"-q, --query <query>\", \"query string\")\n  .option(\n    \"-l, --limit <number>\",\n    \"maximum number of items to display per registry\",\n    \"100\"\n  )\n  .option(\"-o, --offset <number>\", \"number of items to skip\", \"0\")\n  .action(async (registries: string[], opts) => {\n    try {\n      const options = searchOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n        query: opts.query,\n        limit: opts.limit ? parseInt(opts.limit, 10) : undefined,\n        offset: opts.offset ? parseInt(opts.offset, 10) : undefined,\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      // Use createConfig to get proper default paths\n      const defaultConfig = createConfig({\n        style: \"new-york\",\n        resolvedPaths: {\n          cwd: options.cwd,\n        },\n      })\n      let shadowConfig = configWithDefaults(defaultConfig)\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults({\n          ...defaultConfig,\n          ...partialConfig,\n        })\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      const { config: updatedConfig, newRegistries } =\n        await ensureRegistriesInConfig(\n          registries.map((registry) => `${registry}/registry`),\n          config,\n          {\n            silent: true,\n            writeFile: false,\n          }\n        )\n      if (newRegistries.length > 0) {\n        config.registries = updatedConfig.registries\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(registries, config)\n\n      // Use searchRegistries for both search and non-search cases\n      const results = await searchRegistries(registries as `@${string}`[], {\n        query: options.query,\n        limit: options.limit,\n        offset: options.offset,\n        config,\n      })\n\n      console.log(JSON.stringify(results, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","import path from \"path\"\nimport { getRegistryItems } from \"@/src/registry/api\"\nimport { configWithDefaults } from \"@/src/registry/config\"\nimport { clearRegistryContext } from \"@/src/registry/context\"\nimport { validateRegistryConfigForItems } from \"@/src/registry/validator\"\nimport { rawConfigSchema } from \"@/src/schema\"\nimport { loadEnvFiles } from \"@/src/utils/env-loader\"\nimport { getConfig } from \"@/src/utils/get-config\"\nimport { handleError } from \"@/src/utils/handle-error\"\nimport { ensureRegistriesInConfig } from \"@/src/utils/registries\"\nimport { Command } from \"commander\"\nimport fsExtra from \"fs-extra\"\nimport { z } from \"zod\"\n\nconst viewOptionsSchema = z.object({\n  cwd: z.string(),\n})\n\nexport const view = new Command()\n  .name(\"view\")\n  .description(\"view items from the registry\")\n  .argument(\"<items...>\", \"the item names or URLs to view\")\n  .option(\n    \"-c, --cwd <cwd>\",\n    \"the working directory. defaults to the current directory.\",\n    process.cwd()\n  )\n  .action(async (items: string[], opts) => {\n    try {\n      const options = viewOptionsSchema.parse({\n        cwd: path.resolve(opts.cwd),\n      })\n\n      await loadEnvFiles(options.cwd)\n\n      // Start with a shadow config to support partial components.json.\n      let shadowConfig = configWithDefaults({})\n\n      // Check if there's a components.json file (partial or complete).\n      const componentsJsonPath = path.resolve(options.cwd, \"components.json\")\n      if (fsExtra.existsSync(componentsJsonPath)) {\n        const existingConfig = await fsExtra.readJson(componentsJsonPath)\n        const partialConfig = rawConfigSchema.partial().parse(existingConfig)\n        shadowConfig = configWithDefaults(partialConfig)\n      }\n\n      // Try to get the full config, but fall back to shadow config if it fails.\n      let config = shadowConfig\n      try {\n        const fullConfig = await getConfig(options.cwd)\n        if (fullConfig) {\n          config = configWithDefaults(fullConfig)\n        }\n      } catch {\n        // Use shadow config if getConfig fails (partial components.json).\n      }\n\n      const { config: updatedConfig, newRegistries } =\n        await ensureRegistriesInConfig(items, config, {\n          silent: true,\n          writeFile: false,\n        })\n      if (newRegistries.length > 0) {\n        config.registries = updatedConfig.registries\n      }\n\n      // Validate registries early for better error messages.\n      validateRegistryConfigForItems(items, config)\n\n      const payload = await getRegistryItems(items, { config })\n      console.log(JSON.stringify(payload, null, 2))\n      process.exit(0)\n    } catch (error) {\n      handleError(error)\n    } finally {\n      clearRegistryContext()\n    }\n  })\n","{\n  \"name\": \"shadcn\",\n  \"version\": \"3.6.2\",\n  \"description\": \"Add components to your apps.\",\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"license\": \"MIT\",\n  \"author\": {\n    \"name\": \"shadcn\",\n    \"url\": \"https://twitter.com/shadcn\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/shadcn-ui/ui.git\",\n    \"directory\": \"packages/shadcn\"\n  },\n  \"files\": [\n    \"dist\"\n  ],\n  \"keywords\": [\n    \"components\",\n    \"ui\",\n    \"tailwind\",\n    \"radix-ui\",\n    \"shadcn\"\n  ],\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"types\": \"./dist/index.d.ts\",\n      \"default\": \"./dist/index.js\"\n    },\n    \"./registry\": {\n      \"types\": \"./dist/registry/index.d.ts\",\n      \"default\": \"./dist/registry/index.js\"\n    },\n    \"./schema\": {\n      \"types\": \"./dist/schema/index.d.ts\",\n      \"default\": \"./dist/schema/index.js\"\n    },\n    \"./mcp\": {\n      \"types\": \"./dist/mcp/index.d.ts\",\n      \"default\": \"./dist/mcp/index.js\"\n    },\n    \"./utils\": {\n      \"types\": \"./dist/utils/index.d.ts\",\n      \"default\": \"./dist/utils/index.js\"\n    },\n    \"./icons\": {\n      \"types\": \"./dist/icons/index.d.ts\",\n      \"default\": \"./dist/icons/index.js\"\n    },\n    \"./tailwind.css\": {\n      \"style\": \"./dist/tailwind.css\"\n    }\n  },\n  \"bin\": \"./dist/index.js\",\n  \"scripts\": {\n    \"dev\": \"tsup --watch\",\n    \"build\": \"tsup\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"clean\": \"rimraf dist && rimraf components\",\n    \"start:dev\": \"cross-env REGISTRY_URL=http://localhost:4000/r node dist/index.js\",\n    \"start:prod\": \"cross-env REGISTRY_URL=https://ui.shadcn.com/r node dist/index.js\",\n    \"start\": \"node dist/index.js\",\n    \"format:write\": \"prettier --write \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"format:check\": \"prettier --check \\\"**/*.{ts,tsx,mdx}\\\" --cache\",\n    \"release\": \"changeset version\",\n    \"pub:beta\": \"pnpm build && pnpm publish --no-git-checks --access public --tag beta\",\n    \"pub:next\": \"pnpm build && pnpm publish --no-git-checks --access public --tag next\",\n    \"pub:release\": \"pnpm build && pnpm publish --access public\",\n    \"test\": \"vitest run\",\n    \"test:dev\": \"REGISTRY_URL=http://localhost:4000/r vitest run\",\n    \"mcp:inspect\": \"pnpm dlx @modelcontextprotocol/inspector node dist/index.js mcp\"\n  },\n  \"dependencies\": {\n    \"@antfu/ni\": \"^25.0.0\",\n    \"@babel/core\": \"^7.28.0\",\n    \"@babel/parser\": \"^7.28.0\",\n    \"@babel/plugin-transform-typescript\": \"^7.28.0\",\n    \"@babel/preset-typescript\": \"^7.27.1\",\n    \"@dotenvx/dotenvx\": \"^1.48.4\",\n    \"@modelcontextprotocol/sdk\": \"^1.17.2\",\n    \"browserslist\": \"^4.26.2\",\n    \"commander\": \"^14.0.0\",\n    \"cosmiconfig\": \"^9.0.0\",\n    \"dedent\": \"^1.6.0\",\n    \"deepmerge\": \"^4.3.1\",\n    \"diff\": \"^8.0.2\",\n    \"execa\": \"^9.6.0\",\n    \"fast-glob\": \"^3.3.3\",\n    \"fs-extra\": \"^11.3.1\",\n    \"fuzzysort\": \"^3.1.0\",\n    \"https-proxy-agent\": \"^7.0.6\",\n    \"kleur\": \"^4.1.5\",\n    \"msw\": \"^2.10.4\",\n    \"node-fetch\": \"^3.3.2\",\n    \"open\": \"^11.0.0\",\n    \"ora\": \"^8.2.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-selector-parser\": \"^7.1.0\",\n    \"prompts\": \"^2.4.2\",\n    \"recast\": \"^0.23.11\",\n    \"stringify-object\": \"^5.0.0\",\n    \"ts-morph\": \"^26.0.0\",\n    \"tsconfig-paths\": \"^4.2.0\",\n    \"zod\": \"^3.24.1\",\n    \"zod-to-json-schema\": \"^3.24.6\"\n  },\n  \"devDependencies\": {\n    \"@types/babel__core\": \"^7.20.5\",\n    \"@types/fs-extra\": \"^11.0.4\",\n    \"@types/prompts\": \"^2.4.9\",\n    \"@types/stringify-object\": \"^4.0.5\",\n    \"rimraf\": \"^6.0.1\",\n    \"tsup\": \"^8.5.0\",\n    \"type-fest\": \"^4.41.0\",\n    \"typescript\": \"^5.9.2\"\n  }\n}\n","#!/usr/bin/env node\nimport { add } from \"@/src/commands/add\"\nimport { build } from \"@/src/commands/build\"\nimport { create } from \"@/src/commands/create\"\nimport { diff } from \"@/src/commands/diff\"\nimport { info } from \"@/src/commands/info\"\nimport { init } from \"@/src/commands/init\"\nimport { mcp } from \"@/src/commands/mcp\"\nimport { migrate } from \"@/src/commands/migrate\"\nimport { build as registryBuild } from \"@/src/commands/registry/build\"\nimport { mcp as registryMcp } from \"@/src/commands/registry/mcp\"\nimport { search } from \"@/src/commands/search\"\nimport { view } from \"@/src/commands/view\"\nimport { Command } from \"commander\"\n\nimport packageJson from \"../package.json\"\n\nprocess.on(\"SIGINT\", () => process.exit(0))\nprocess.on(\"SIGTERM\", () => process.exit(0))\n\nasync function main() {\n  const program = new Command()\n    .name(\"shadcn\")\n    .description(\"add items from registries to your project\")\n    .version(\n      packageJson.version || \"1.0.0\",\n      \"-v, --version\",\n      \"display the version number\"\n    )\n\n  program\n    .addCommand(init)\n    .addCommand(create)\n    .addCommand(add)\n    .addCommand(diff)\n    .addCommand(view)\n    .addCommand(search)\n    .addCommand(migrate)\n    .addCommand(info)\n    .addCommand(build)\n    .addCommand(mcp)\n  // Registry commands\n  program.addCommand(registryBuild).addCommand(registryMcp)\n\n  program.parse()\n}\n\nmain()\n\nexport * from \"./registry/api\"\n"]}